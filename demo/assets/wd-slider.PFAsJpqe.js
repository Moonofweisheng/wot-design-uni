var e=Object.defineProperty,a=Object.defineProperties,l=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,r=(a,l,s)=>l in a?e(a,l,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[l]=s,o=(e,a)=>{for(var l in a||(a={}))t.call(a,l)&&r(e,l,a[l]);if(s)for(var l of s(a))u.call(a,l)&&r(e,l,a[l]);return e},d=(e,s)=>a(e,l(s));import{d as n,r as i,Z as v,K as c,c as b,N as p,D as _,I as m,y as w,M as f,b as h,g as y,w as g,z as M,h as x,i as T,q as C,j,t as k,G as O,m as V,F as $,at as I,au as L}from"./index-Bxqg77pZ.js";import{u as P}from"./useTouch.kX4jUfrK.js";import{d as N,m as S,e as A,c as F,_ as D}from"./base64.C49xnrUQ.js";const G=d(o({},F),{customMinClass:S(""),customMaxClass:S(""),hideMinMax:A(!1),hideLabel:A(!1),disabled:A(!1),inactiveColor:S("#e5e5e5"),activeColor:S(""),max:N(100),min:N(0),step:N(1),modelValue:{type:[Number,Array],default:0}}),H=D(n(d(o({},{name:"wd-slider",options:{addGlobalClass:!0,virtualHost:!0,styleIsolation:"shared"}}),{props:G,emits:["dragstart","dragmove","dragend","update:modelValue"],setup(e,{expose:a,emit:l}){const s=e,t=l,u=i(`sliderBarWrapperId${v()}`),r=P(),o=i(0),{proxy:d}=c(),n=i(0),N=i(0),S=b((()=>s.min)),A=b((()=>s.max)),F=b((()=>s.step<=0?(console.warn("[wot ui] warning(wd-slider): step must be greater than 0"),1):s.step)),D=i(0),G=i(R()),H=b((()=>p(G.value))),q=b((()=>A.value-S.value)),z=b((()=>H.value?G.value[0]:G.value)),B=b((()=>H.value?G.value[1]:0)),E=b((()=>`wd-slider ${s.hideLabel?"":"wd-slider__has-label"} ${s.disabled?"wd-slider--disabled":""} ${s.customClass}`)),K=b((()=>_({visibility:s.disabled?"hidden":"visible"}))),W=b((()=>{const e={};return s.inactiveColor&&(e.background=s.inactiveColor),_(e)})),X=b((()=>{const e={};if(0===q.value)return _(e);if(H.value){const[a,l]=U(G.value);e.width=100*(l-a)/q.value+"%",e.left=100*(a-S.value)/q.value+"%"}else e.width=100*(G.value-S.value)/q.value+"%",e.left="0";return s.activeColor&&(e.background=s.activeColor),_(e)}));function Z(){return s.disabled}function J(e,a,l){return Math.min(Math.max(e,a),l)}function Q(){f(`#${u.value}`,!1,d).then((e=>{n.value=Number(e.width),N.value=Number(e.left)}))}function R(){return p(s.modelValue)?U(s.modelValue):J(s.modelValue,S.value,A.value)}function U(e){if(!Array.isArray(e)||e.length<2)return console.warn("[wot ui] warning(wd-slider): range value should be an array with at least 2 elements"),[S.value,A.value];const a=J(e[0],S.value,A.value),l=J(e[1],S.value,A.value);return a>l?[l,a]:[a,l]}function Y(e){e=J(e,S.value,A.value);const a=Math.round((e-S.value)/F.value);return parseFloat((S.value+a*F.value).toFixed(10))}function ee(e,a){Z()||(o.value=a,r.touchStart(e),D.value=I(G.value),t("dragstart",{value:G.value}))}function ae(e){if(Z())return;r.touchMove(e);const a=r.deltaX.value/n.value*q.value;let l=I(D.value);p(l)?l[o.value]+=a:l+=a,function(e){let a=I(e);a=p(e)?U(e).map((e=>Y(e))):Y(e),L(a,G.value)||(G.value=a)}(l),t("dragmove",{value:G.value})}function le(){Z()||t("dragend",{value:G.value})}return m((()=>s.modelValue),(e=>{L(e,G.value)||(G.value=R())}),{deep:!0}),m(G,(e=>{t("update:modelValue",e)})),w((()=>{Q()})),a({initSlider:Q}),(e,a)=>{const l=T;return y(),h(l,{class:C(E.value),style:O(e.customStyle)},{default:g((()=>[e.hideMinMax?M("",!0):(y(),h(l,{key:0,class:C(`wd-slider__label-min ${e.customMinClass}`)},{default:g((()=>[j(k(S.value),1)])),_:1},8,["class"])),x(l,{class:"wd-slider__bar-wrapper",style:O(W.value),id:u.value},{default:g((()=>[x(l,{class:"wd-slider__bar",style:O(X.value)},{default:g((()=>[H.value?(y(),V($,{key:0},[x(l,{class:"wd-slider__button-wrapper wd-slider__button-wrapper--left",style:O(K.value),onTouchstart:a[0]||(a[0]=e=>ee(e,0)),onTouchmove:ae,onTouchend:le,onTouchcancel:le},{default:g((()=>[e.hideLabel?M("",!0):(y(),h(l,{key:0,class:"wd-slider__label"},{default:g((()=>[j(k(z.value),1)])),_:1})),x(l,{class:"wd-slider__button"})])),_:1},8,["style"]),x(l,{class:"wd-slider__button-wrapper wd-slider__button-wrapper--right",style:O(K.value),onTouchstart:a[1]||(a[1]=e=>ee(e,1)),onTouchmove:ae,onTouchend:le,onTouchcancel:le},{default:g((()=>[e.hideLabel?M("",!0):(y(),h(l,{key:0,class:"wd-slider__label"},{default:g((()=>[j(k(B.value),1)])),_:1})),x(l,{class:"wd-slider__button"})])),_:1},8,["style"])],64)):(y(),h(l,{key:1,class:"wd-slider__button-wrapper",style:O(K.value),onTouchstart:a[2]||(a[2]=e=>ee(e,0)),onTouchmove:ae,onTouchend:le,onTouchcancel:le},{default:g((()=>[e.hideLabel?M("",!0):(y(),h(l,{key:0,class:"wd-slider__label"},{default:g((()=>[j(k(z.value),1)])),_:1})),x(l,{class:"wd-slider__button"})])),_:1},8,["style"]))])),_:1},8,["style"])])),_:1},8,["style","id"]),e.hideMinMax?M("",!0):(y(),h(l,{key:1,class:C(`wd-slider__label-max ${e.customMaxClass}`)},{default:g((()=>[j(k(A.value),1)])),_:1},8,["class"]))])),_:1},8,["class","style"])}}})),[["__scopeId","data-v-2be6231e"]]);export{H as _};
