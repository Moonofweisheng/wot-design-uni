var e=Object.defineProperty,a=Object.defineProperties,t=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,s=(a,t,l)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[t]=l,n=(e,a)=>{for(var t in a||(a={}))r.call(a,t)&&s(e,t,a[t]);if(l)for(var t of l(a))o.call(a,t)&&s(e,t,a[t]);return e},i=(e,l)=>a(e,t(l));import{d as c,K as u,r as d,c as m,I as f,b as p,g as y,w as b,m as v,F as h,n as g,i as w,G as _,h as C,z as x,L as O,q as j,M as k}from"./index-Bxqg77pZ.js";import{e as z,m as I,d as P,c as V,a as A,_ as H}from"./base64.C49xnrUQ.js";const E=i(n({},V),{num:P(5),modelValue:{type:[String,Number,null],default:null},readonly:z(!1),size:I("16px"),space:I("4px"),color:I("#E8E8E8"),activeColor:{type:[String,Array],default:"linear-gradient(180deg, rgba(255,238,0,1) 0%,rgba(250,176,21,1) 100%)"},icon:I("star-on"),activeIcon:I("star-on"),disabled:z(!1),disabledColor:I("linear-gradient(315deg, rgba(177,177,177,1) 0%,rgba(199,199,199,1) 100%)"),allowHalf:z(!1),clearable:z(!1)}),S=H(c(i(n({},{name:"wd-rate",options:{addGlobalClass:!0,virtualHost:!0,styleIsolation:"shared"}}),{props:E,emits:["update:modelValue","change"],setup(e,{emit:a}){const{proxy:t}=u(),l=e,r=a,o=d([]),s=d(""),n=m((()=>`background:${l.color};`)),i=m((()=>`background:${l.disabled?l.disabledColor:s.value};`));f((()=>l.activeColor),(e=>{Array.isArray(e)&&!e.length&&console.error("activeColor cannot be an empty array"),z()}),{immediate:!0,deep:!0}),f([()=>l.num,()=>l.modelValue],(()=>{!function(){const{modelValue:e,num:a,allowHalf:t}=l;if(null===e||!a)return;if("number"!=typeof e)return void console.error("[wot ui] error(wd-rate): the value of wd-rate should be a number");const r=[],s=Math.floor(e);for(let l=0;l<a;l++)l<s?r.push("100%"):l===s&&t&&e%1!=0?r.push("50%"):r.push("0");o.value=r,z()}()}),{immediate:!0,deep:!0});const c=e=>"0"!==e;function z(){const{activeColor:e,modelValue:a,num:t}=l;let r="";r=Array.isArray(e)&&e.length?Number(a)<=.6*t||!e[1]?e[0]:e[1]:e,s.value=r}function I(e,a){const{readonly:t,disabled:r,clearable:o,allowHalf:s,modelValue:n}=l;if(t||r)return;let i=a?e+.5:e+1;if(o){i===n&&i===(s?.5:1)&&(i=0)}P(i)}function P(e){r("update:modelValue",e),r("change",{value:e})}function V(e){return a=this,r=null,o=function*(){if(l.readonly||l.disabled)return;const{clientX:a}=e.touches[0],r=yield k(".wd-rate__item",!0,t),o=Array.from(r).findIndex((e=>a>=e.left&&a<=e.right));if(-1!==o){const e=r[o],t=e.width,s=l.allowHalf&&a-e.left<t/2;(s?o+.5:o+1)>=.5&&P(s?o+.5:o+1)}},new Promise(((e,t)=>{var l=e=>{try{n(o.next(e))}catch(a){t(a)}},s=e=>{try{n(o.throw(e))}catch(a){t(a)}},n=a=>a.done?e(a.value):Promise.resolve(a.value).then(l,s);n((o=o.apply(a,r)).next())}));var a,r,o}return(e,a)=>{const t=w;return y(),p(t,{class:j(`wd-rate ${e.customClass}`),style:_(e.customStyle),onTouchmove:V},{default:b((()=>[(y(!0),v(h,null,g(o.value,((a,r)=>(y(),p(t,{key:r,"data-index":r,style:_({"margin-right":r==o.value.length-1?0:e.space}),class:"wd-rate__item"},{default:b((()=>[C(A,{"custom-class":"wd-rate__item-star",name:c(a)?e.activeIcon:e.icon,size:e.size,"custom-style":"100%"===a?i.value:n.value,onClick:e=>I(r,!1)},null,8,["name","size","custom-style","onClick"]),l.allowHalf?(y(),p(t,{key:0,class:"wd-rate__item-half",onClick:O((e=>I(r,!0)),["stop"])},{default:b((()=>[C(A,{"custom-class":"wd-rate__item-star",name:c(a)?e.activeIcon:e.icon,size:e.size,"custom-style":"0"!==a?i.value:n.value},null,8,["name","size","custom-style"])])),_:2},1032,["onClick"])):x("",!0)])),_:2},1032,["data-index","style"])))),128))])),_:1},8,["class","style"])}}})),[["__scopeId","data-v-910e848c"]]);export{S as _};
