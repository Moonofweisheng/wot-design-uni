var e=Object.defineProperty,l=Object.defineProperties,a=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,r=(l,a,o)=>a in l?e(l,a,{enumerable:!0,configurable:!0,writable:!0,value:o}):l[a]=o,i=(e,l)=>{for(var a in l||(l={}))t.call(l,a)&&r(e,a,l[a]);if(o)for(var a of o(l))s.call(l,a)&&r(e,a,l[a]);return e},c=(e,o)=>l(e,a(o));import{b as u,a as n,c as d,f as m,m as p,e as v,w as f,_ as b}from"./base64.DhmryiS1.js";import{d as y,r as h,c as k,M as g,C as _,a7 as w,J as x,e as C,f as V,b as S,g as j,w as z,h as K,l as O,aQ as P,z as $,i as F,K as I,D as B,aF as T,q,m as D,F as E,n as L,k as M,j as U,t as A,E as R,B as N,L as W,N as G,aD as H,a8 as J}from"./index-CO5J-Q2S.js";import{_ as Q}from"./wd-search.DpH85-9r.js";import{_ as X}from"./wd-action-sheet.DiVGnjTo.js";import{_ as Y}from"./wd-checkbox.iB0EfeZC.js";import{w as Z}from"./wd-checkbox-group.spDS-mGg.js";import{a as ee,_ as le}from"./wd-radio-group.CTls74nI.js";import{_ as ae}from"./wd-button.C_HwThsm.js";import{_ as oe,i as te}from"./page-wraper.Di0VYMXm.js";import{u as se}from"./useTranslate.3zyJJ8gO.js";const re=c(i({},u),{label:String,labelWidth:n("33%"),disabled:d(!1),readonly:Boolean,placeholder:String,title:String,alignRight:d(!1),error:d(!1),required:d(!1),useLabelSlot:d(!1),useDefaultSlot:d(!1),size:String,center:d(!1),checkedColor:String,min:p(0),max:p(0),selectSize:String,loading:d(!1),loadingColor:n("#4D80F0"),closeOnClickModal:d(!0),modelValue:v([String,Number,Boolean,Array]),columns:m(),type:n("checkbox"),valueKey:n("value"),labelKey:n("label"),confirmButtonText:String,displayFormat:Function,beforeConfirm:Function,zIndex:p(15),safeAreaInsetBottom:d(!0),filterable:d(!1),filterPlaceholder:String,ellipsis:d(!1),scrollIntoView:d(!0),prop:String,rules:m(),customContentClass:n(""),customLabelClass:n(""),customValueClass:n(""),showConfirm:d(!0),clearable:d(!1),rootPortal:d(!1),markerSide:n("before")}),ie=b(y(c(i({},{name:"wd-select-picker",options:{addGlobalClass:!0,virtualHost:!0,styleIsolation:"shared"}}),{props:re,emits:["change","cancel","confirm","clear","update:modelValue","open","close"],setup(e,{expose:l,emit:a}){const{translate:o}=se("select-picker"),t=e,s=a,r=h(!1),u=h([]),n=h(!1),d=h([]),m=h(""),p=h([]),v=h(0),b=k((()=>{const e=ne(t.modelValue);let l="";if(t.displayFormat)l=t.displayFormat(e,t.columns);else{const{type:a,labelKey:o}=t;if("checkbox"===a){l=(g(e)?e:[]).map((e=>ue(e))).map((e=>e[o])).join(", ")}else if("radio"===a){l=ue(e)[o]}else l=e}return l})),y=k((()=>{const e=["wd-select-picker__cell"];return t.disabled&&e.push("is-disabled"),t.readonly&&e.push("is-readonly"),t.error&&e.push("is-error"),b.value||e.push("wd-select-picker__cell--placeholder"),e.join(" ")}));_((()=>t.modelValue),(e=>{e!==u.value&&(u.value=ne(e),d.value=ne(e))}),{deep:!0,immediate:!0}),_((()=>t.columns),(e=>{t.filterable&&m.value?he(e,m.value):p.value=e}),{deep:!0,immediate:!0}),_((()=>t.displayFormat),(e=>{e&&!J(e)&&console.error("The type of displayFormat must be Function")}),{deep:!0,immediate:!0}),_((()=>t.beforeConfirm),(e=>{e&&!J(e)&&console.error("The type of beforeConfirm must be Function")}),{deep:!0,immediate:!0}),w((()=>{u.value=ne(t.modelValue),p.value=t.columns}));const{proxy:re}=x();function ie(){return e=this,l=null,a=function*(){let e="",l=[];N(u.value)&&""!==u.value&&!g(u.value)?(e="#wd-radio-group",l=[W(`#radio${u.value}`,!1,re)]):g(u.value)&&u.value.length>0&&(u.value.forEach((e=>{l.push(W(`#check${e}`,!1,re))})),e="#wd-checkbox-group"),e&&(yield G(2e3/30),Promise.all([W(".wd-select-picker__wrapper",!1,re),W(e,!1,re),...l]).then((e=>{if(N(e)&&g(e)){const l=e[0],a=e[1],o=e.slice(2)||[];N(a)&&N(l)&&o.findIndex((e=>e.bottom>l.top&&e.top<l.bottom))<0&&(v.value=-1,H((()=>{v.value=Math.max(0,o[0].top-a.top-l.height/2)})))}})))},new Promise(((o,t)=>{var s=e=>{try{i(a.next(e))}catch(l){t(l)}},r=e=>{try{i(a.throw(e))}catch(l){t(l)}},i=e=>e.done?o(e.value):Promise.resolve(e.value).then(s,r);i((a=a.apply(e,l)).next())}));var e,l,a}function ce(){}function ue(e){const{valueKey:l,labelKey:a,columns:o}=t,s=o.filter((a=>a[l]===e));return s.length>0?s[0]:{[l]:e,[a]:""}}function ne(e){return"checkbox"===t.type?g(e)?e:[]:e}function de({value:e}){u.value=e,s("change",{value:e}),"radio"!==t.type||t.showConfirm||ve()}function me(){r.value=!1,n.value||(u.value=ne(d.value)),s("cancel"),s("close")}function pe(){t.disabled||t.readonly||(u.value=ne(t.modelValue),r.value=!0,n.value=!1,s("open"))}function ve(){if(t.loading)return r.value=!1,s("confirm"),void s("close");t.beforeConfirm?t.beforeConfirm(u.value,(e=>{e&&fe()})):fe()}function fe(){n.value=!0,r.value=!1,d.value=ne(u.value);let e={};e="checkbox"===t.type?(g(d.value)?d.value:[]).map((e=>ue(e))):ue(d.value),s("update:modelValue",d.value),s("confirm",{value:d.value,selectedItems:e}),s("close")}function be(e,l){const a=new RegExp(`(${l})`,"g");return e.split(a).map((e=>({type:e===l?"active":"normal",label:e})))}function ye({value:e}){""===e?(p.value=[],m.value=e,H((()=>{p.value=t.columns}))):(m.value=e,he(t.columns,e))}function he(e,l){const a=e.filter((e=>e[t.labelKey].indexOf(l)>-1)).map((e=>c(i({},e),{[t.labelKey]:be(e[t.labelKey],l)})));p.value=[],H((()=>{p.value=a}))}const ke=k((()=>"radio"===t.type&&t.showConfirm||"checkbox"===t.type)),ge=k((()=>t.clearable&&!t.disabled&&!t.readonly&&b.value.length));function _e(){s("update:modelValue","checkbox"===t.type?[]:""),s("clear")}const we=k((()=>!t.disabled&&!t.readonly&&!ge.value));return l({close:me,open:pe}),(e,l)=>{const a=C(V("wd-icon"),f),t=F,s=C(V("wd-search"),Q),i=M,c=T;return j(),S(t,{class:q(`wd-select-picker ${e.customClass}`),style:R(e.customStyle)},{default:z((()=>[e.$slots.default?(j(),S(t,{key:1,onClick:pe},{default:z((()=>[B(e.$slots,"default",{},void 0,!0)])),_:3})):(j(),S(oe,{key:0,title:e.label,value:b.value||e.placeholder||O(o)("placeholder"),required:e.required,size:e.size,"title-width":e.labelWidth,prop:e.prop,rules:e.rules,clickable:!e.disabled&&!e.readonly,"value-align":e.alignRight?"right":"left",center:e.center,"custom-class":y.value,"custom-style":e.customStyle,"custom-title-class":e.customLabelClass,"custom-value-class":e.customValueClass,ellipsis:e.ellipsis,"use-title-slot":!!e.$slots.label,"marker-side":e.markerSide,onClick:pe},P({"right-icon":z((()=>[we.value?(j(),S(a,{key:0,"custom-class":"wd-select-picker__arrow",name:"arrow-right"})):ge.value?(j(),S(t,{key:1,onClick:I(_e,["stop"])},{default:z((()=>[K(a,{"custom-class":"wd-select-picker__clear",name:"error-fill"})])),_:1})):$("",!0)])),_:2},[e.$slots.label?{name:"title",fn:z((()=>[B(e.$slots,"label",{},void 0,!0)])),key:"0"}:void 0]),1032,["title","value","required","size","title-width","prop","rules","clickable","value-align","center","custom-class","custom-style","custom-title-class","custom-value-class","ellipsis","use-title-slot","marker-side"])),K(X,{modelValue:r.value,"onUpdate:modelValue":l[3]||(l[3]=e=>r.value=e),duration:250,title:e.title||O(o)("title"),"close-on-click-modal":e.closeOnClickModal,"z-index":e.zIndex,"safe-area-inset-bottom":e.safeAreaInsetBottom,"root-portal":e.rootPortal,onClose:me,onOpened:l[4]||(l[4]=l=>e.scrollIntoView?ie():""),"custom-header-class":"wd-select-picker__header"},{default:z((()=>[e.filterable?(j(),S(s,{key:0,modelValue:m.value,"onUpdate:modelValue":l[0]||(l[0]=e=>m.value=e),placeholder:e.filterPlaceholder||O(o)("filterPlaceholder"),"hide-cancel":"","placeholder-left":"",onChange:ye},null,8,["modelValue","placeholder"])):$("",!0),K(c,{class:q(`wd-select-picker__wrapper ${e.filterable?"is-filterable":""} ${e.loading?"is-loading":""} ${e.customContentClass}`),"scroll-y":!e.loading,"scroll-top":v.value,"scroll-with-animation":!0},{default:z((()=>["checkbox"===e.type&&O(g)(u.value)?(j(),S(t,{key:0,id:"wd-checkbox-group"},{default:z((()=>[K(Z,{modelValue:u.value,"onUpdate:modelValue":l[1]||(l[1]=e=>u.value=e),cell:"",size:e.selectSize,"checked-color":e.checkedColor,min:e.min,max:e.max,onChange:de},{default:z((()=>[(j(!0),D(E,null,L(p.value,(l=>(j(),S(t,{key:l[e.valueKey],id:"check"+l[e.valueKey]},{default:z((()=>[K(Y,{modelValue:l[e.valueKey],disabled:l.disabled},{default:z((()=>[e.filterable&&m.value?(j(!0),D(E,{key:0},L(l[e.labelKey],(e=>(j(),D(E,{key:e.label},["active"===e.type?(j(),S(i,{key:0,class:"wd-select-picker__text-active"},{default:z((()=>[U(A(e.label),1)])),_:2},1024)):(j(),D(E,{key:1},[U(A(e.label),1)],64))],64)))),128)):(j(),D(E,{key:1},[U(A(l[e.labelKey]),1)],64))])),_:2},1032,["modelValue","disabled"])])),_:2},1032,["id"])))),128))])),_:1},8,["modelValue","size","checked-color","min","max"])])),_:1})):$("",!0),"radio"!==e.type||O(g)(u.value)?$("",!0):(j(),S(t,{key:1,id:"wd-radio-group"},{default:z((()=>[K(ee,{modelValue:u.value,"onUpdate:modelValue":l[2]||(l[2]=e=>u.value=e),cell:"",size:e.selectSize,"checked-color":e.checkedColor,onChange:de},{default:z((()=>[(j(!0),D(E,null,L(p.value,((l,a)=>(j(),S(t,{key:a,id:"radio"+l[e.valueKey]},{default:z((()=>[K(le,{value:l[e.valueKey],disabled:l.disabled},{default:z((()=>[e.filterable&&m.value?(j(!0),D(E,{key:0},L(l[e.labelKey],(e=>(j(),S(i,{key:e.label,class:q(""+("active"===e.type?"wd-select-picker__text-active":""))},{default:z((()=>[U(A(e.label),1)])),_:2},1032,["class"])))),128)):(j(),D(E,{key:1},[U(A(l[e.labelKey]),1)],64))])),_:2},1032,["value","disabled"])])),_:2},1032,["id"])))),128))])),_:1},8,["modelValue","size","checked-color"])])),_:1})),e.loading?(j(),S(t,{key:2,class:"wd-select-picker__loading",onTouchmove:ce},{default:z((()=>[K(te,{color:e.loadingColor},null,8,["color"])])),_:1})):$("",!0)])),_:1},8,["class","scroll-y","scroll-top"]),ke.value?(j(),S(t,{key:1,class:"wd-select-picker__footer"},{default:z((()=>[K(ae,{block:"",size:"large",onClick:ve,disabled:e.loading},{default:z((()=>[U(A(e.confirmButtonText||O(o)("confirm")),1)])),_:1},8,["disabled"])])),_:1})):$("",!0)])),_:1},8,["modelValue","title","close-on-click-modal","z-index","safe-area-inset-bottom","root-portal"])])),_:3},8,["class","style"])}}})),[["__scopeId","data-v-94472df7"]]);export{ie as _};
