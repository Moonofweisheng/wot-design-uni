var e=Object.defineProperty,l=Object.defineProperties,a=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,t=(l,a,s)=>a in l?e(l,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):l[a]=s,n=(e,l)=>{for(var a in l||(l={}))o.call(l,a)&&t(e,a,l[a]);if(s)for(var a of s(l))r.call(l,a)&&t(e,a,l[a]);return e},i=(e,s)=>l(e,a(s)),u=(e,l,a)=>new Promise(((s,o)=>{var r=e=>{try{n(a.next(e))}catch(l){o(l)}},t=e=>{try{n(a.throw(e))}catch(l){o(l)}},n=e=>e.done?s(e.value):Promise.resolve(e.value).then(r,t);n((a=a.apply(e,l)).next())}));import{d as c,a5 as d,r as p,C as f,c as m,B as y,G as h,au as b,b as v,g,i as _,E as w,q as x,w as k,z as S,h as $,k as C,j as I,D as j,t as P,ao as O,N as V}from"./index-CO5J-Q2S.js";import{a as E,c as W,f as q,d as B,m as T,b as z,w as L,_ as H}from"./base64.DhmryiS1.js";import{k as K,e as M,F as A}from"./page-wraper.Di0VYMXm.js";import{u as D}from"./useTranslate.3zyJJ8gO.js";const F=i(n({},z),{customInputClass:E(""),customLabelClass:E(""),placeholder:String,placeholderStyle:String,placeholderClass:E(""),cursorSpacing:T(0),cursor:T(-1),selectionStart:T(-1),selectionEnd:T(-1),adjustPosition:W(!0),holdKeyboard:W(!1),confirmType:E("done"),confirmHold:W(!1),focus:W(!1),type:E("text"),maxlength:{type:Number,default:-1},disabled:W(!1),alwaysEmbed:W(!1),alignRight:W(!1),modelValue:B(""),showPassword:W(!1),clearable:W(!1),readonly:W(!1),prefixIcon:String,suffixIcon:String,showWordLimit:W(!1),label:String,labelWidth:E(""),size:String,error:W(!1),center:W(!1),noBorder:W(!1),required:W(!1),prop:String,rules:q(),clearTrigger:E("always"),focusWhenClear:W(!0),ignoreCompositionEvent:W(!0),inputmode:E("text"),markerSide:E("before")}),G=H(c(i(n({},{name:"wd-input",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"}}),{props:F,emits:["update:modelValue","clear","blur","focus","input","keyboardheightchange","confirm","clicksuffixicon","clickprefixicon","click"],setup(e,{emit:l}){const a=e,s=l,o=d(),{translate:r}=D("input"),t=p(!1),n=p(!1),i=p(!1),c=p(!1),E=p(function(){const e=function(e){const{maxlength:l}=a;if(y(l)&&-1!==l&&String(e).length>l)return e.toString().slice(0,l);return e}(a.modelValue);l=e,o=a.modelValue,b(String(l),String(o))||s("update:modelValue",e);var l,o;return e}()),W=K();f((()=>a.focus),(e=>{i.value=e}),{immediate:!0,deep:!0}),f((()=>a.modelValue),(e=>{E.value=y(e)?String(e):""}));const{parent:q}=M(A),B=m((()=>y(a.placeholder)?a.placeholder:r("placeholder"))),T=m((()=>{const{disabled:e,readonly:l,clearable:s,clearTrigger:o}=a;return!(!s||l||e||!E.value||!("always"===o||"focus"===a.clearTrigger&&c.value))})),z=m((()=>{const{disabled:e,readonly:l,maxlength:s,showWordLimit:o}=a;return Boolean(!e&&!l&&y(s)&&s>-1&&o)})),H=m((()=>q&&a.prop&&q.errorMessages&&q.errorMessages[a.prop]?q.errorMessages[a.prop]:"")),F=m((()=>{let e=!1;if(q&&q.props.rules){const l=q.props.rules;for(const s in l)Object.prototype.hasOwnProperty.call(l,s)&&s===a.prop&&Array.isArray(l[s])&&(e=l[s].some((e=>e.required)))}return a.required||a.rules.some((e=>e.required))||e})),G=m((()=>`wd-input  ${a.label||o.label?"is-cell":""} ${a.center?"is-center":""} ${W.border.value?"is-border":""} ${a.size?"is-"+a.size:""} ${a.error?"is-error":""} ${a.disabled?"is-disabled":""}  ${E.value&&String(E.value).length>0?"is-not-empty":""}  ${a.noBorder?"is-no-border":""} ${a.customClass}`)),N=m((()=>`wd-input__label ${a.customLabelClass}`)),R=m((()=>`wd-input__placeholder  ${a.placeholderClass}`)),U=m((()=>a.labelWidth?h({"min-width":a.labelWidth,"max-width":a.labelWidth}):""));function J(){t.value=!t.value}function Q(){return u(this,null,(function*(){c.value=!1,E.value="",a.focusWhenClear&&(n.value=!0,i.value=!1),yield V(),a.focusWhenClear&&(i.value=!0,c.value=!0),s("update:modelValue",E.value),s("clear")}))}function X(){return u(this,null,(function*(){yield V(150),n.value?n.value=!1:(c.value=!1,s("blur",{value:E.value}))}))}function Y({detail:e}){c.value=!0,s("focus",e)}function Z({detail:e}){s("update:modelValue",E.value),s("input",e)}function ee({detail:e}){s("keyboardheightchange",e)}function le({detail:e}){s("confirm",e)}function ae(){s("clicksuffixicon")}function se(){s("clickprefixicon")}function oe(e){s("click",e)}return(e,l)=>{const s=C,o=_,r=O;return g(),v(o,{class:x(G.value),style:w(e.customStyle),onClick:oe},{default:k((()=>[e.label||e.$slots.label?(g(),v(o,{key:0,class:x(N.value),style:w(U.value)},{default:k((()=>[F.value&&"before"===e.markerSide?(g(),v(s,{key:0,class:"wd-input__required wd-input__required--left"},{default:k((()=>[I("*")])),_:1})):S("",!0),e.prefixIcon||e.$slots.prefix?(g(),v(o,{key:1,class:"wd-input__prefix"},{default:k((()=>[e.prefixIcon&&!e.$slots.prefix?(g(),v(L,{key:0,"custom-class":"wd-input__icon",name:e.prefixIcon,onClick:se},null,8,["name"])):j(e.$slots,"prefix",{key:1},void 0,!0)])),_:3})):S("",!0),$(o,{class:"wd-input__label-inner"},{default:k((()=>[e.label&&!e.$slots.label?(g(),v(s,{key:0},{default:k((()=>[I(P(e.label),1)])),_:1})):e.$slots.label?j(e.$slots,"label",{key:1},void 0,!0):S("",!0)])),_:3}),F.value&&"after"===e.markerSide?(g(),v(s,{key:2,class:"wd-input__required"},{default:k((()=>[I("*")])),_:1})):S("",!0)])),_:3},8,["class","style"])):S("",!0),$(o,{class:"wd-input__body"},{default:k((()=>[$(o,{class:"wd-input__value"},{default:k((()=>[!e.prefixIcon&&!e.$slots.prefix||e.label?S("",!0):(g(),v(o,{key:0,class:"wd-input__prefix"},{default:k((()=>[e.prefixIcon&&!e.$slots.prefix?(g(),v(L,{key:0,"custom-class":"wd-input__icon",name:e.prefixIcon,onClick:se},null,8,["name"])):j(e.$slots,"prefix",{key:1},void 0,!0)])),_:3})),$(r,{class:x(["wd-input__inner",e.prefixIcon?"wd-input__inner--prefix":"",z.value?"wd-input__inner--count":"",e.alignRight?"is-align-right":"",e.customInputClass]),type:e.type,password:e.showPassword&&!t.value,modelValue:E.value,"onUpdate:modelValue":l[0]||(l[0]=e=>E.value=e),placeholder:B.value,disabled:e.disabled||e.readonly,maxlength:e.maxlength,focus:i.value,"confirm-type":e.confirmType,"confirm-hold":e.confirmHold,cursor:e.cursor,"cursor-spacing":e.cursorSpacing,"placeholder-style":e.placeholderStyle,"selection-start":e.selectionStart,"selection-end":e.selectionEnd,"adjust-position":e.adjustPosition,"hold-keyboard":e.holdKeyboard,"always-embed":e.alwaysEmbed,"placeholder-class":R.value,ignoreCompositionEvent:e.ignoreCompositionEvent,inputmode:e.inputmode,onInput:Z,onFocus:Y,onBlur:X,onConfirm:le,onKeyboardheightchange:ee},null,8,["class","type","password","modelValue","placeholder","disabled","maxlength","focus","confirm-type","confirm-hold","cursor","cursor-spacing","placeholder-style","selection-start","selection-end","adjust-position","hold-keyboard","always-embed","placeholder-class","ignoreCompositionEvent","inputmode"]),a.readonly?(g(),v(o,{key:1,class:"wd-input__readonly-mask"})):S("",!0),T.value||e.showPassword||e.suffixIcon||z.value||e.$slots.suffix?(g(),v(o,{key:2,class:"wd-input__suffix"},{default:k((()=>[T.value?(g(),v(L,{key:0,"custom-class":"wd-input__clear",name:"error-fill",onClick:Q})):S("",!0),e.showPassword?(g(),v(L,{key:1,"custom-class":"wd-input__icon",name:t.value?"view":"eye-close",onClick:J},null,8,["name"])):S("",!0),z.value?(g(),v(o,{key:2,class:"wd-input__count"},{default:k((()=>[$(s,{class:x([E.value&&String(E.value).length>0?"wd-input__count-current":"",String(E.value).length>e.maxlength?"is-error":""])},{default:k((()=>[I(P(String(E.value).length),1)])),_:1},8,["class"]),I(" /"+P(e.maxlength),1)])),_:1})):S("",!0),e.suffixIcon&&!e.$slots.suffix?(g(),v(L,{key:3,"custom-class":"wd-input__icon",name:e.suffixIcon,onClick:ae},null,8,["name"])):j(e.$slots,"suffix",{key:4},void 0,!0)])),_:3})):S("",!0)])),_:3}),H.value?(g(),v(o,{key:0,class:"wd-input__error-message"},{default:k((()=>[I(P(H.value),1)])),_:1})):S("",!0)])),_:3})])),_:3},8,["class","style"])}}})),[["__scopeId","data-v-671b6bc6"]]);export{G as _};
