var e=Object.defineProperty,a=Object.defineProperties,l=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,r=(a,l,s)=>l in a?e(a,l,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[l]=s,o=(e,a)=>{for(var l in a||(a={}))t.call(a,l)&&r(e,l,a[l]);if(s)for(var l of s(a))u.call(a,l)&&r(e,l,a[l]);return e},d=(e,s)=>a(e,l(s));import{d as n,r as i,Y as c,J as v,c as b,M as p,G as _,C as m,y as w,L as f,b as h,g as y,w as g,z as M,h as x,i as C,q as T,j,t as k,E as O,m as V,F as $,at as L,au as P}from"./index-CO5J-Q2S.js";import{u as I}from"./useTouch.DvgJUR0k.js";import{m as S,a as A,c as F,b as G,_ as N}from"./base64.DhmryiS1.js";const E=d(o({},G),{customMinClass:A(""),customMaxClass:A(""),hideMinMax:F(!1),hideLabel:F(!1),disabled:F(!1),inactiveColor:A("#e5e5e5"),activeColor:A(""),max:S(100),min:S(0),step:S(1),modelValue:{type:[Number,Array],default:0}}),q=N(n(d(o({},{name:"wd-slider",options:{addGlobalClass:!0,virtualHost:!0,styleIsolation:"shared"}}),{props:E,emits:["dragstart","dragmove","dragend","update:modelValue"],setup(e,{expose:a,emit:l}){const s=e,t=l,u=i(`sliderBarWrapperId${c()}`),r=I(),o=i(0),{proxy:d}=v(),n=i(0),S=i(0),A=b((()=>s.min)),F=b((()=>s.max)),G=b((()=>s.step<=0?(console.warn("[wot ui] warning(wd-slider): step must be greater than 0"),1):s.step)),N=i(0),E=i(R()),q=b((()=>p(E.value))),z=b((()=>F.value-A.value)),B=b((()=>q.value?E.value[0]:E.value)),D=b((()=>q.value?E.value[1]:0)),H=b((()=>`wd-slider ${s.hideLabel?"":"wd-slider__has-label"} ${s.disabled?"wd-slider--disabled":""} ${s.customClass}`)),J=b((()=>_({visibility:s.disabled?"hidden":"visible"}))),W=b((()=>{const e={};return s.inactiveColor&&(e.background=s.inactiveColor),_(e)})),X=b((()=>{const e={};if(0===z.value)return _(e);if(q.value){const[a,l]=U(E.value);e.width=100*(l-a)/z.value+"%",e.left=100*(a-A.value)/z.value+"%"}else e.width=100*(E.value-A.value)/z.value+"%",e.left="0";return s.activeColor&&(e.background=s.activeColor),_(e)}));function Y(){return s.disabled}function K(e,a,l){return Math.min(Math.max(e,a),l)}function Q(){f(`#${u.value}`,!1,d).then((e=>{n.value=Number(e.width),S.value=Number(e.left)}))}function R(){return p(s.modelValue)?U(s.modelValue):K(s.modelValue,A.value,F.value)}function U(e){if(!Array.isArray(e)||e.length<2)return console.warn("[wot ui] warning(wd-slider): range value should be an array with at least 2 elements"),[A.value,F.value];const a=K(e[0],A.value,F.value),l=K(e[1],A.value,F.value);return a>l?[l,a]:[a,l]}function Z(e){e=K(e,A.value,F.value);const a=Math.round((e-A.value)/G.value);return parseFloat((A.value+a*G.value).toFixed(10))}function ee(e,a){Y()||(o.value=a,r.touchStart(e),N.value=L(E.value),t("dragstart",{value:E.value}))}function ae(e){if(Y())return;r.touchMove(e);const a=r.deltaX.value/n.value*z.value;let l=L(N.value);p(l)?l[o.value]+=a:l+=a,function(e){let a=L(e);a=p(e)?U(e).map((e=>Z(e))):Z(e),P(a,E.value)||(E.value=a)}(l),t("dragmove",{value:E.value})}function le(){Y()||t("dragend",{value:E.value})}return m((()=>s.modelValue),(e=>{P(e,E.value)||(E.value=R())}),{deep:!0}),m(E,(e=>{t("update:modelValue",e)})),w((()=>{Q()})),a({initSlider:Q}),(e,a)=>{const l=C;return y(),h(l,{class:T(H.value),style:O(e.customStyle)},{default:g((()=>[e.hideMinMax?M("",!0):(y(),h(l,{key:0,class:T(`wd-slider__label-min ${e.customMinClass}`)},{default:g((()=>[j(k(A.value),1)])),_:1},8,["class"])),x(l,{class:"wd-slider__bar-wrapper",style:O(W.value),id:u.value},{default:g((()=>[x(l,{class:"wd-slider__bar",style:O(X.value)},{default:g((()=>[q.value?(y(),V($,{key:0},[x(l,{class:"wd-slider__button-wrapper wd-slider__button-wrapper--left",style:O(J.value),onTouchstart:a[0]||(a[0]=e=>ee(e,0)),onTouchmove:ae,onTouchend:le,onTouchcancel:le},{default:g((()=>[e.hideLabel?M("",!0):(y(),h(l,{key:0,class:"wd-slider__label"},{default:g((()=>[j(k(B.value),1)])),_:1})),x(l,{class:"wd-slider__button"})])),_:1},8,["style"]),x(l,{class:"wd-slider__button-wrapper wd-slider__button-wrapper--right",style:O(J.value),onTouchstart:a[1]||(a[1]=e=>ee(e,1)),onTouchmove:ae,onTouchend:le,onTouchcancel:le},{default:g((()=>[e.hideLabel?M("",!0):(y(),h(l,{key:0,class:"wd-slider__label"},{default:g((()=>[j(k(D.value),1)])),_:1})),x(l,{class:"wd-slider__button"})])),_:1},8,["style"])],64)):(y(),h(l,{key:1,class:"wd-slider__button-wrapper",style:O(J.value),onTouchstart:a[2]||(a[2]=e=>ee(e,0)),onTouchmove:ae,onTouchend:le,onTouchcancel:le},{default:g((()=>[e.hideLabel?M("",!0):(y(),h(l,{key:0,class:"wd-slider__label"},{default:g((()=>[j(k(B.value),1)])),_:1})),x(l,{class:"wd-slider__button"})])),_:1},8,["style"]))])),_:1},8,["style"])])),_:1},8,["style","id"]),e.hideMinMax?M("",!0):(y(),h(l,{key:1,class:T(`wd-slider__label-max ${e.customMaxClass}`)},{default:g((()=>[j(k(F.value),1)])),_:1},8,["class"]))])),_:1},8,["class","style"])}}})),[["__scopeId","data-v-2be6231e"]]);export{q as _};
