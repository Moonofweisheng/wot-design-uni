var e=Object.defineProperty,a=Object.defineProperties,t=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,i=(a,t,s)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[t]=s,o=(e,a)=>{for(var t in a||(a={}))l.call(a,t)&&i(e,t,a[t]);if(s)for(var t of s(a))n.call(a,t)&&i(e,t,a[t]);return e},d=(e,s)=>a(e,t(s));import{d as c,J as r,c as u,B as m,r as b,G as _,C as p,b as w,g as f,w as v,z as y,i as h,E as x,q as g,D as k,as as I,ae as $,an as C,aR as S,y as N,aD as T,e as j,f as L,h as P,l as O,aF as V,m as z,F as H,n as D,S as G,aB as W,k as X,j as B,t as E,H as F,L as M,aS as R}from"./index-CO5J-Q2S.js";import{e as q}from"./page-wraper.Di0VYMXm.js";import{b as A,a as J,m as K,c as Q,n as U,d as Y,_ as Z,w as ee}from"./base64.DhmryiS1.js";import{w as ae}from"./wd-badge.BX4YLemv.js";import{w as te,a as se}from"./wd-sticky-box.Clzzl_gp.js";import{u as le}from"./useTouch.DvgJUR0k.js";import{u as ne}from"./useChildren.Dtl4IwbD.js";import{u as ie}from"./useTranslate.3zyJJ8gO.js";const oe=Symbol("wd-tabs"),de=d(o({},A),{modelValue:Y(0),slidableNum:K(6),mapNum:K(10),mapTitle:String,sticky:Q(!1),offsetTop:K(0),swipeable:Q(!1),autoLineWidth:Q(!1),lineWidth:U,lineHeight:U,color:J(""),inactiveColor:J(""),animated:Q(!1),duration:K(300),slidable:J("auto")}),ce=d(o({},A),{name:U,title:String,disabled:Q(!1),lazy:Q(!0),badgeProps:Object}),re=Z(c(d(o({},{name:"wd-tab",options:{addGlobalClass:!0,virtualHost:!0,styleIsolation:"shared"}}),{props:ce,setup(e){const a=e,{proxy:t}=r(),{parent:s,index:l}=q(oe),n=u((()=>!!m(s)&&s.state.activeIndex===l.value)),i=b(n.value),o=u((()=>{const e={};return n.value||m(s)&&s.props.animated||(e.display="none"),_(e)})),d=u((()=>!a.lazy||i.value||n.value));return p(n,(e=>{e&&(i.value=!0)})),p((()=>a.name),(e=>{!m(e)||I(e)||$(e)?s&&function(e){const{name:t}=a;if(null==t||""===t)return;s&&s.children.forEach((a=>{a.$.uid!==e.$.uid&&a.name===t&&console.error(`The tab's bound value: ${t} has been used`)}))}(t):console.error("[wot ui] error(wd-tab): the type of name should be number or string")}),{deep:!0,immediate:!0}),(e,a)=>{const t=h;return f(),w(t,{class:g(`wd-tab ${e.customClass}`),style:x(e.customStyle)},{default:v((()=>[d.value?(f(),w(t,{key:0,class:g(["wd-tab__body",{"wd-tab__body--inactive":!n.value}]),style:x(o.value)},{default:v((()=>[k(e.$slots,"default",{},void 0,!0)])),_:3},8,["class","style"])):y("",!0)])),_:3},8,["class","style"])}}})),[["__scopeId","data-v-08208e62"]]),ue=Z(c(d(o({},{name:"wd-tabs",options:{addGlobalClass:!0,virtualHost:!0,styleIsolation:"shared"}}),{props:de,emits:["change","disabled","click","update:modelValue"],setup(e,{expose:a,emit:t}){const s=".wd-tabs__nav-item",l=".wd-tabs__nav-item-text",n=".wd-tabs__nav-container",i=e,o=t,{translate:d}=ie("tabs"),c=C({activeIndex:0,lineStyle:"display:none;",useInnerLine:!1,inited:!1,animating:!1,mapShow:!1,scrollLeft:0}),{children:b,linkChildren:q}=ne(oe);q({state:c,props:i});const{proxy:A}=r(),J=le(),K=u((()=>"always"===i.slidable||b.length>i.slidableNum)),Q=u((()=>i.animated?_({left:-100*c.activeIndex+"%","transition-duration":i.duration+"ms","-webkit-transition-duration":i.duration+"ms"}):"")),U=(e,a)=>m(e.name)?e.name:a,Y=(e=0,a=!1,t=!0)=>{0!==b.length&&(e=pe(e),b[e].disabled||(c.activeIndex=e,t&&(ce(!1===a),re()),function(){if(!c.inited)return;const e=U(b[c.activeIndex],c.activeIndex);e!==i.modelValue&&(o("change",{index:c.activeIndex,name:e}),o("update:modelValue",e))}()))},Z=S(Y,100,{leading:!0});function de(){c.mapShow?(c.animating=!1,setTimeout((()=>{c.mapShow=!1}),300)):(c.mapShow=!0,setTimeout((()=>{c.animating=!0}),100))}function ce(e=!0){return a=this,t=null,n=function*(){if(!c.inited)return;const{autoLineWidth:a,lineWidth:t,lineHeight:n}=i;try{const i={};if(m(t))i.width=F(t);else if(a){const e=yield M(l,!0,A),a=Number(e[c.activeIndex].width);i.width=F(a)}m(n)&&(i.height=F(n),i.borderRadius=`calc(${F(n)} / 2)`);const o=yield M(s,!0,A),d=o[c.activeIndex];let r=o.slice(0,c.activeIndex).reduce(((e,a)=>e+Number(a.width)),0)+Number(d.width)/2;r&&(i.transform=`translateX(${r}px) translateX(-50%)`,e&&(i.transition="width 0.3s cubic-bezier(0.4, 0, 0.2, 1), transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);"),c.useInnerLine=!1,c.lineStyle=_(i))}catch(o){console.error("[wot ui] error(wd-tabs): update line style failed",o)}},new Promise(((e,s)=>{var l=e=>{try{o(n.next(e))}catch(a){s(a)}},i=e=>{try{o(n.throw(e))}catch(a){s(a)}},o=a=>a.done?e(a.value):Promise.resolve(a.value).then(l,i);o((n=n.apply(a,t)).next())}));var a,t,n}function re(){c.inited&&Promise.all([M(s,!0,A),M(n,!1,A)]).then((([e,a])=>{const t=e[c.activeIndex],s=e.slice(0,c.activeIndex).reduce(((e,a)=>e+a.width),0)-(a.width-Number(t.width))/2;s===c.scrollLeft?c.scrollLeft=s+Math.random()/1e4:c.scrollLeft=s}))}function ue(e){if(void 0===e)return;const{disabled:a}=b[e],t=U(b[e],e);a?o("disabled",{index:e,name:t}):(c.mapShow&&de(),Z(e),o("click",{index:e,name:t}))}function me(e){i.swipeable&&J.touchStart(e)}function be(e){i.swipeable&&J.touchMove(e)}function _e(){if(!i.swipeable)return;const{direction:e,deltaX:a,offsetX:t}=J;"horizontal"===e.value&&t.value>=50&&(a.value>0&&0!==c.activeIndex?Z(c.activeIndex-1):a.value<0&&c.activeIndex!==b.length-1&&Z(c.activeIndex+1))}function pe(e){if(I(e)&&e>=b.length&&(console.error("[wot ui] warning(wd-tabs): the type of tabs' value is Number shouldn't be less than its children"),e=0),$(e)){const a=b.findIndex((a=>a.name===e));e=-1===a?0:a}return e}return p((()=>i.modelValue),(e=>{I(e)||$(e)||console.error("[wot ui] error(wd-tabs): the type of value should be number or string"),""!==e&&m(e)||console.error("[wot ui] error(wd-tabs): tabs's value cannot be '' null or undefined"),"number"==typeof e&&e<0&&console.error("[wot ui] error(wd-tabs): tabs's value cannot be less than zero")}),{immediate:!0,deep:!0}),p((()=>i.modelValue),(e=>{const a=pe(e);Z(e,!1,a!==c.activeIndex)}),{immediate:!1,deep:!0}),p((()=>b.length),(()=>{c.inited&&T((()=>{Z(i.modelValue)}))})),p((()=>i.slidableNum),(e=>{R(e,"slidableNum")})),p((()=>i.mapNum),(e=>{R(e,"mapNum")})),N((()=>{c.inited=!0,T((()=>{Y(i.modelValue,!0),c.useInnerLine=!0}))})),a({setActive:Z,scrollIntoView:re,updateLineStyle:ce}),(e,a)=>{const t=X,s=j(L("wd-badge"),ae),l=h,n=V;return e.sticky?(f(),w(se,{key:0},{default:v((()=>[P(l,{class:g(`wd-tabs ${e.customClass} ${K.value?"is-slide":""} ${e.mapNum<O(b).length&&0!==e.mapNum?"is-map":""}`),style:x(e.customStyle)},{default:v((()=>[P(te,{"offset-top":e.offsetTop},{default:v((()=>[P(l,{class:"wd-tabs__nav wd-tabs__nav--sticky"},{default:v((()=>[P(l,{class:"wd-tabs__nav--wrap"},{default:v((()=>[P(n,{"scroll-x":K.value,"scroll-with-animation":"","scroll-left":c.scrollLeft},{default:v((()=>[P(l,{class:"wd-tabs__nav-container"},{default:v((()=>[(f(!0),z(H,null,D(O(b),((a,n)=>(f(),w(l,{onClick:e=>ue(n),key:n,class:g(`wd-tabs__nav-item  ${c.activeIndex===n?"is-active":""} ${a.disabled?"is-disabled":""}`),style:x(c.activeIndex===n?e.color?"color:"+e.color:"":e.inactiveColor?"color:"+e.inactiveColor:"")},{default:v((()=>[a.badgeProps?(f(),w(s,G(W({key:0},a.badgeProps)),{default:v((()=>[P(t,{class:"wd-tabs__nav-item-text"},{default:v((()=>[B(E(a.title),1)])),_:2},1024)])),_:2},1040)):(f(),w(t,{key:1,class:"wd-tabs__nav-item-text"},{default:v((()=>[B(E(a.title),1)])),_:2},1024)),c.activeIndex===n&&c.useInnerLine?(f(),w(l,{key:2,class:"wd-tabs__line wd-tabs__line--inner"})):y("",!0)])),_:2},1032,["onClick","class","style"])))),128)),P(l,{class:"wd-tabs__line",style:x(c.lineStyle)},null,8,["style"])])),_:1})])),_:1},8,["scroll-x","scroll-left"])])),_:1}),e.mapNum<O(b).length&&0!==e.mapNum?(f(),w(l,{key:0,class:"wd-tabs__map"},{default:v((()=>[P(l,{class:g("wd-tabs__map-btn  "+(c.animating?"is-open":"")),onClick:de},{default:v((()=>[P(l,{class:g("wd-tabs__map-arrow  "+(c.animating?"is-open":""))},{default:v((()=>[P(ee,{name:"arrow-down"})])),_:1},8,["class"])])),_:1},8,["class"]),P(l,{class:"wd-tabs__map-header",style:x(`${c.mapShow?"":"display:none;"}  ${c.animating?"opacity:1;":""}`)},{default:v((()=>[B(E(e.mapTitle||O(d)("all")),1)])),_:1},8,["style"]),P(l,{class:g("wd-tabs__map-body  "+(c.animating?"is-open":"")),style:x(c.mapShow?"":"display:none")},{default:v((()=>[(f(!0),z(H,null,D(O(b),((a,t)=>(f(),w(l,{class:"wd-tabs__map-nav-item",key:t,onClick:e=>ue(t)},{default:v((()=>[P(l,{class:g(`wd-tabs__map-nav-btn ${c.activeIndex===t?"is-active":""}  ${a.disabled?"is-disabled":""}`),style:x(c.activeIndex===t?e.color?"color:"+e.color+";border-color:"+e.color:"":e.inactiveColor?"color:"+e.inactiveColor:"")},{default:v((()=>[B(E(a.title),1)])),_:2},1032,["class","style"])])),_:2},1032,["onClick"])))),128))])),_:1},8,["class","style"])])),_:1})):y("",!0)])),_:1})])),_:1},8,["offset-top"]),P(l,{class:"wd-tabs__container",onTouchstart:me,onTouchmove:be,onTouchend:_e,onTouchcancel:_e},{default:v((()=>[P(l,{class:g(["wd-tabs__body",e.animated?"is-animated":""]),style:x(Q.value)},{default:v((()=>[k(e.$slots,"default",{},void 0,!0)])),_:3},8,["class","style"])])),_:3}),P(l,{class:"wd-tabs__mask",style:x(`${c.mapShow?"":"display:none;"} ${c.animating?"opacity:1;":""}`),onClick:de},null,8,["style"])])),_:3},8,["class","style"])])),_:3})):(f(),w(l,{key:1,class:g(`wd-tabs ${e.customClass} ${K.value?"is-slide":""} ${e.mapNum<O(b).length&&0!==e.mapNum?"is-map":""}`)},{default:v((()=>[P(l,{class:"wd-tabs__nav"},{default:v((()=>[P(l,{class:"wd-tabs__nav--wrap"},{default:v((()=>[P(n,{"scroll-x":K.value,"scroll-with-animation":"","scroll-left":c.scrollLeft},{default:v((()=>[P(l,{class:"wd-tabs__nav-container"},{default:v((()=>[(f(!0),z(H,null,D(O(b),((a,n)=>(f(),w(l,{onClick:e=>ue(n),key:n,class:g(`wd-tabs__nav-item ${c.activeIndex===n?"is-active":""} ${a.disabled?"is-disabled":""}`),style:x(c.activeIndex===n?e.color?"color:"+e.color:"":e.inactiveColor?"color:"+e.inactiveColor:"")},{default:v((()=>[a.badgeProps?(f(),w(s,W({key:0,"custom-class":"wd-tabs__nav-item-badge"},a.badgeProps),{default:v((()=>[P(t,{class:"wd-tabs__nav-item-text"},{default:v((()=>[B(E(a.title),1)])),_:2},1024)])),_:2},1040)):(f(),w(t,{key:1,class:"wd-tabs__nav-item-text"},{default:v((()=>[B(E(a.title),1)])),_:2},1024)),c.activeIndex===n&&c.useInnerLine?(f(),w(l,{key:2,class:"wd-tabs__line wd-tabs__line--inner"})):y("",!0)])),_:2},1032,["onClick","class","style"])))),128)),P(l,{class:"wd-tabs__line",style:x(c.lineStyle)},null,8,["style"])])),_:1})])),_:1},8,["scroll-x","scroll-left"])])),_:1}),e.mapNum<O(b).length&&0!==e.mapNum?(f(),w(l,{key:0,class:"wd-tabs__map"},{default:v((()=>[P(l,{class:"wd-tabs__map-btn",onClick:de},{default:v((()=>[P(l,{class:g("wd-tabs__map-arrow "+(c.animating?"is-open":""))},{default:v((()=>[P(ee,{name:"arrow-down"})])),_:1},8,["class"])])),_:1}),P(l,{class:"wd-tabs__map-header",style:x(`${c.mapShow?"":"display:none;"}  ${c.animating?"opacity:1;":""}`)},{default:v((()=>[B(E(e.mapTitle||O(d)("all")),1)])),_:1},8,["style"]),P(l,{class:g("wd-tabs__map-body "+(c.animating?"is-open":"")),style:x(c.mapShow?"":"display:none")},{default:v((()=>[(f(!0),z(H,null,D(O(b),((e,a)=>(f(),w(l,{class:"wd-tabs__map-nav-item",key:a,onClick:e=>ue(a)},{default:v((()=>[P(l,{class:g(`wd-tabs__map-nav-btn ${c.activeIndex===a?"is-active":""}  ${e.disabled?"is-disabled":""}`)},{default:v((()=>[B(E(e.title),1)])),_:2},1032,["class"])])),_:2},1032,["onClick"])))),128))])),_:1},8,["class","style"])])),_:1})):y("",!0)])),_:1}),P(l,{class:"wd-tabs__container",onTouchstart:me,onTouchmove:be,onTouchend:_e,onTouchcancel:_e},{default:v((()=>[P(l,{class:g(["wd-tabs__body",e.animated?"is-animated":""]),style:x(Q.value)},{default:v((()=>[k(e.$slots,"default",{},void 0,!0)])),_:3},8,["class","style"])])),_:3}),P(l,{class:"wd-tabs__mask",style:x(`${c.mapShow?"":"display:none;"}  ${c.animating?"opacity:1":""}`),onClick:de},null,8,["style"])])),_:3},8,["class"]))}}})),[["__scopeId","data-v-49c741e2"]]);export{re as _,ue as a};
