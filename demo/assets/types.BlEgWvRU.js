var e=Object.defineProperty,a=Object.defineProperties,t=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,i=(a,t,r)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):a[t]=r,n=(e,a)=>{for(var t in a||(a={}))s.call(a,t)&&i(e,t,a[t]);if(r)for(var t of r(a))o.call(a,t)&&i(e,t,a[t]);return e},l=(e,r)=>a(e,t(r));import{a3 as u,aH as c,aI as p,a8 as m,N as f,aJ as d}from"./index-Bxqg77pZ.js";import{c as b,e as y,m as h,d as g,g as F}from"./base64.C49xnrUQ.js";const P={PENDING:"pending",LOADING:"loading",SUCCESS:"success",FAIL:"fail"};function v(){let e=null;const a=a=>{a?a.abort():e&&(e.abort(),e=null)};function t(e){return f(e.tempFiles)?e.tempFiles.map((e=>({path:e.path||"",name:e.name||"",size:e.size,type:"image",thumb:e.path||""}))):[{path:e.tempFiles.path||"",name:e.tempFiles.name||"",size:e.tempFiles.size,type:"image",thumb:e.tempFiles.path||""}]}return{startUpload:(t,r)=>{const{uploadMethod:s,formData:o={},action:i,name:u="file",header:c={},fileType:p="image",statusCode:f=200,statusKey:b="status",abortPrevious:y=!1}=r;t[b]=P.LOADING;const h={action:i,header:c,name:u,fileName:u,fileType:p,statusCode:f,abortPrevious:y,onSuccess:(a,t,s)=>{var o;t[b]=P.SUCCESS,e=null,null==(o=r.onSuccess)||o.call(r,a,t,s)},onError:(a,t,s)=>{var o;t[b]=P.FAIL,t.error=a.errMsg,e=null,null==(o=r.onError)||o.call(r,a,t,s)},onProgress:(e,a)=>{var t;a.percent=e.progress,null==(t=r.onProgress)||t.call(r,e,a)}};return m(s)?s(t,o,h):((t,r,s)=>{s.abortPrevious&&a();const o=d({url:s.action,header:s.header,name:s.name,fileName:s.name,fileType:s.fileType,formData:r,filePath:t.url,success(e){e.statusCode===s.statusCode?s.onSuccess(e,t,r):s.onError(l(n({},e),{errMsg:e.errMsg||""}),t,r)},fail(e){s.onError(e,t,r)}});return e=o,o.onProgressUpdate((e=>{s.onProgress(e,t)})),o})(t,o,h)},abort:a,UPLOAD_STATUS:P,chooseFile:function({multiple:e,sizeType:a,sourceType:r,maxCount:s,accept:o,compressed:i,maxDuration:n,camera:l,extension:m}){return new Promise(((f,d)=>{switch(o){case"image":default:u({count:e?s:1,sizeType:a,sourceType:r,extension:m,success:e=>f(t(e)),fail:d});break;case"video":p({sourceType:r,compressed:i,maxDuration:n,camera:l,extension:m,success:e=>f(function(e){return[{path:e.tempFilePath||e.filePath||"",name:e.name||"",size:e.size,type:"video",thumb:e.thumbTempFilePath||"",duration:e.duration}]}(e)),fail:d});break;case"all":c({count:e?s:1,type:o,extension:m,success:e=>f(e.tempFiles),fail:d})}}))}}}const S=l(n({},b),{fileList:F(),action:h(""),header:{type:Object,default:()=>({})},multiple:y(!1),disabled:y(!1),limit:Number,showLimitNum:y(!0),maxSize:g(Number.MAX_VALUE),sourceType:{type:Array,default:()=>["album","camera"]},sizeType:{type:Array,default:()=>["original","compressed"]},name:h("file"),formData:{type:Object,default:()=>({})},onPreviewFail:Function,beforeUpload:Function,beforeChoose:Function,beforeRemove:Function,beforePreview:Function,buildFormData:Function,loadingType:h("ring"),loadingColor:h("#ffffff"),accept:h("image"),statusKey:h("status"),loadingSize:h("24px"),compressed:y(!0),maxDuration:g(60),camera:h("back"),imageMode:h("aspectFit"),successStatus:g(200),customEvokeClass:h(""),customPreviewClass:h(""),autoUpload:y(!0),reupload:y(!1),uploadMethod:Function,extension:Array});export{S as a,v as u};
