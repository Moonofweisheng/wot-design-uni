var a=Object.defineProperty,e=Object.defineProperties,t=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,i=(e,t,s)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,o=(a,e)=>{for(var t in e||(e={}))l.call(e,t)&&i(a,t,e[t]);if(s)for(var t of s(e))n.call(e,t)&&i(a,t,e[t]);return a},d=(a,s)=>e(a,t(s));import{d as c,K as r,c as u,C as m,r as b,D as _,I as p,b as w,g as f,w as v,z as y,i as h,G as x,q as g,E as I,as as k,ag as $,aj as C,aR as S,y as N,aD as T,e as j,f as L,h as P,l as O,aF as V,m as z,F as H,n as E,T as W,aB as X,k as D,j as G,t as M,H as F,M as R,aS as q}from"./index-Bxqg77pZ.js";import{b as A,c as B}from"./page-wraper.dVabujC3.js";import{c as K,e as J,m as Q,d as U,n as Y,b as Z,_ as aa,a as ea}from"./base64.C49xnrUQ.js";import{w as ta}from"./wd-badge.CbLj-T0n.js";import{w as sa,a as la}from"./wd-sticky-box.DQPIDfn0.js";import{u as na}from"./useTouch.kX4jUfrK.js";import{u as ia}from"./useTranslate.CsR2puND.js";const oa=Symbol("wd-tabs"),da=d(o({},K),{modelValue:Z(0),slidableNum:U(6),mapNum:U(10),mapTitle:String,sticky:J(!1),offsetTop:U(0),swipeable:J(!1),autoLineWidth:J(!1),lineWidth:Y,lineHeight:Y,color:Q(""),inactiveColor:Q(""),animated:J(!1),duration:U(300),slidable:Q("auto"),showScrollbar:J(!1)}),ca=d(o({},K),{name:Y,title:String,disabled:J(!1),lazy:J(!0),badgeProps:Object}),ra=aa(c(d(o({},{name:"wd-tab",options:{addGlobalClass:!0,virtualHost:!0,styleIsolation:"shared"}}),{props:ca,setup(a){const e=a,{proxy:t}=r(),{parent:s,index:l}=A(oa),n=u((()=>!!m(s)&&s.state.activeIndex===l.value)),i=b(n.value),o=u((()=>{const a={};return n.value||m(s)&&s.props.animated||(a.display="none"),_(a)})),d=u((()=>!e.lazy||i.value||n.value));return p(n,(a=>{a&&(i.value=!0)})),p((()=>e.name),(a=>{!m(a)||k(a)||$(a)?s&&function(a){const{name:t}=e;if(null==t||""===t)return;s&&s.children.forEach((e=>{e.$.uid!==a.$.uid&&e.name===t&&console.error(`The tab's bound value: ${t} has been used`)}))}(t):console.error("[wot ui] error(wd-tab): the type of name should be number or string")}),{deep:!0,immediate:!0}),(a,e)=>{const t=h;return f(),w(t,{class:g(`wd-tab ${a.customClass}`),style:x(a.customStyle)},{default:v((()=>[d.value?(f(),w(t,{key:0,class:g(["wd-tab__body",{"wd-tab__body--inactive":!n.value}]),style:x(o.value)},{default:v((()=>[I(a.$slots,"default",{},void 0,!0)])),_:3},8,["class","style"])):y("",!0)])),_:3},8,["class","style"])}}})),[["__scopeId","data-v-08208e62"]]),ua=aa(c(d(o({},{name:"wd-tabs",options:{addGlobalClass:!0,virtualHost:!0,styleIsolation:"shared"}}),{props:da,emits:["change","disabled","click","update:modelValue"],setup(a,{expose:e,emit:t}){const s=".wd-tabs__nav-item",l=".wd-tabs__nav-item-text",n=".wd-tabs__nav-container",i=a,o=t,{translate:d}=ia("tabs"),c=C({activeIndex:0,lineStyle:"display:none;",useInnerLine:!1,inited:!1,animating:!1,mapShow:!1,scrollLeft:0}),{children:b,linkChildren:A}=B(oa);A({state:c,props:i});const{proxy:K}=r(),J=na(),Q=u((()=>"always"===i.slidable||b.length>i.slidableNum)),U=u((()=>i.animated?_({left:-100*c.activeIndex+"%","transition-duration":i.duration+"ms","-webkit-transition-duration":i.duration+"ms"}):"")),Y=(a,e)=>m(a.name)?a.name:e,Z=(a=0,e=!1,t=!0)=>{0!==b.length&&(a=pa(a),b[a].disabled||(c.activeIndex=a,t&&(ca(!1===e),ra()),function(){if(!c.inited)return;const a=Y(b[c.activeIndex],c.activeIndex);a!==i.modelValue&&(o("change",{index:c.activeIndex,name:a}),o("update:modelValue",a))}()))},aa=S(Z,100,{leading:!0});function da(){c.mapShow?(c.animating=!1,setTimeout((()=>{c.mapShow=!1}),300)):(c.mapShow=!0,setTimeout((()=>{c.animating=!0}),100))}function ca(a=!0){return e=this,t=null,n=function*(){if(!c.inited)return;const{autoLineWidth:e,lineWidth:t,lineHeight:n}=i;try{const i={};if(m(t))i.width=F(t);else if(e){const a=yield R(l,!0,K),e=Number(a[c.activeIndex].width);i.width=F(e)}m(n)&&(i.height=F(n),i.borderRadius=`calc(${F(n)} / 2)`);const o=yield R(s,!0,K),d=o[c.activeIndex];let r=o.slice(0,c.activeIndex).reduce(((a,e)=>a+Number(e.width)),0)+Number(d.width)/2;r&&(i.transform=`translateX(${r}px) translateX(-50%)`,a&&(i.transition="width 0.3s cubic-bezier(0.4, 0, 0.2, 1), transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);"),c.useInnerLine=!1,c.lineStyle=_(i))}catch(o){console.error("[wot ui] error(wd-tabs): update line style failed",o)}},new Promise(((a,s)=>{var l=a=>{try{o(n.next(a))}catch(e){s(e)}},i=a=>{try{o(n.throw(a))}catch(e){s(e)}},o=e=>e.done?a(e.value):Promise.resolve(e.value).then(l,i);o((n=n.apply(e,t)).next())}));var e,t,n}function ra(){c.inited&&Promise.all([R(s,!0,K),R(n,!1,K)]).then((([a,e])=>{const t=a[c.activeIndex],s=a.slice(0,c.activeIndex).reduce(((a,e)=>a+e.width),0)-(e.width-Number(t.width))/2;s===c.scrollLeft?c.scrollLeft=s+Math.random()/1e4:c.scrollLeft=s}))}function ua(a){if(void 0===a)return;const{disabled:e}=b[a],t=Y(b[a],a);e?o("disabled",{index:a,name:t}):(c.mapShow&&da(),aa(a),o("click",{index:a,name:t}))}function ma(a){i.swipeable&&J.touchStart(a)}function ba(a){i.swipeable&&J.touchMove(a)}function _a(){if(!i.swipeable)return;const{direction:a,deltaX:e,offsetX:t}=J;"horizontal"===a.value&&t.value>=50&&(e.value>0&&0!==c.activeIndex?aa(c.activeIndex-1):e.value<0&&c.activeIndex!==b.length-1&&aa(c.activeIndex+1))}function pa(a){if(k(a)&&a>=b.length&&(console.error("[wot ui] warning(wd-tabs): the type of tabs' value is Number shouldn't be less than its children"),a=0),$(a)){const e=b.findIndex((e=>e.name===a));a=-1===e?0:e}return a}return p((()=>i.modelValue),(a=>{k(a)||$(a)||console.error("[wot ui] error(wd-tabs): the type of value should be number or string"),""!==a&&m(a)||console.error("[wot ui] error(wd-tabs): tabs's value cannot be '' null or undefined"),"number"==typeof a&&a<0&&console.error("[wot ui] error(wd-tabs): tabs's value cannot be less than zero")}),{immediate:!0,deep:!0}),p((()=>i.modelValue),(a=>{const e=pa(a);aa(a,!1,e!==c.activeIndex)}),{immediate:!1,deep:!0}),p((()=>b.length),(()=>{c.inited&&T((()=>{aa(i.modelValue)}))})),p((()=>i.slidableNum),(a=>{q(a,"slidableNum")})),p((()=>i.mapNum),(a=>{q(a,"mapNum")})),N((()=>{c.inited=!0,T((()=>{Z(i.modelValue,!0),c.useInnerLine=!0}))})),e({setActive:aa,scrollIntoView:ra,updateLineStyle:ca}),(a,e)=>{const t=D,s=j(L("wd-badge"),ta),l=h,n=V;return a.sticky?(f(),w(la,{key:0},{default:v((()=>[P(l,{class:g(`wd-tabs ${a.customClass} ${Q.value?"is-slide":""} ${a.mapNum<O(b).length&&0!==a.mapNum?"is-map":""} ${a.showScrollbar?"":"is-hide-scrollbar"}`),style:x(a.customStyle)},{default:v((()=>[P(sa,{"offset-top":a.offsetTop},{default:v((()=>[P(l,{class:"wd-tabs__nav wd-tabs__nav--sticky"},{default:v((()=>[P(l,{class:"wd-tabs__nav--wrap"},{default:v((()=>[P(n,{"scroll-x":Q.value,"scroll-with-animation":"","scroll-left":c.scrollLeft},{default:v((()=>[P(l,{class:"wd-tabs__nav-container"},{default:v((()=>[(f(!0),z(H,null,E(O(b),((e,n)=>(f(),w(l,{onClick:a=>ua(n),key:n,class:g(`wd-tabs__nav-item  ${c.activeIndex===n?"is-active":""} ${e.disabled?"is-disabled":""}`),style:x(c.activeIndex===n?a.color?"color:"+a.color:"":a.inactiveColor?"color:"+a.inactiveColor:"")},{default:v((()=>[e.badgeProps?(f(),w(s,W(X({key:0},e.badgeProps)),{default:v((()=>[P(t,{class:"wd-tabs__nav-item-text"},{default:v((()=>[G(M(e.title),1)])),_:2},1024)])),_:2},1040)):(f(),w(t,{key:1,class:"wd-tabs__nav-item-text"},{default:v((()=>[G(M(e.title),1)])),_:2},1024)),c.activeIndex===n&&c.useInnerLine?(f(),w(l,{key:2,class:"wd-tabs__line wd-tabs__line--inner"})):y("",!0)])),_:2},1032,["onClick","class","style"])))),128)),P(l,{class:"wd-tabs__line",style:x(c.lineStyle)},null,8,["style"])])),_:1})])),_:1},8,["scroll-x","scroll-left"])])),_:1}),a.mapNum<O(b).length&&0!==a.mapNum?(f(),w(l,{key:0,class:"wd-tabs__map"},{default:v((()=>[P(l,{class:g("wd-tabs__map-btn  "+(c.animating?"is-open":"")),onClick:da},{default:v((()=>[P(l,{class:g("wd-tabs__map-arrow  "+(c.animating?"is-open":""))},{default:v((()=>[P(ea,{name:"arrow-down"})])),_:1},8,["class"])])),_:1},8,["class"]),P(l,{class:"wd-tabs__map-header",style:x(`${c.mapShow?"":"display:none;"}  ${c.animating?"opacity:1;":""}`)},{default:v((()=>[G(M(a.mapTitle||O(d)("all")),1)])),_:1},8,["style"]),P(l,{class:g("wd-tabs__map-body  "+(c.animating?"is-open":"")),style:x(c.mapShow?"":"display:none")},{default:v((()=>[(f(!0),z(H,null,E(O(b),((e,t)=>(f(),w(l,{class:"wd-tabs__map-nav-item",key:t,onClick:a=>ua(t)},{default:v((()=>[P(l,{class:g(`wd-tabs__map-nav-btn ${c.activeIndex===t?"is-active":""}  ${e.disabled?"is-disabled":""}`),style:x(c.activeIndex===t?a.color?"color:"+a.color+";border-color:"+a.color:"":a.inactiveColor?"color:"+a.inactiveColor:"")},{default:v((()=>[G(M(e.title),1)])),_:2},1032,["class","style"])])),_:2},1032,["onClick"])))),128))])),_:1},8,["class","style"])])),_:1})):y("",!0)])),_:1})])),_:1},8,["offset-top"]),P(l,{class:"wd-tabs__container",onTouchstart:ma,onTouchmove:ba,onTouchend:_a,onTouchcancel:_a},{default:v((()=>[P(l,{class:g(["wd-tabs__body",a.animated?"is-animated":""]),style:x(U.value)},{default:v((()=>[I(a.$slots,"default",{},void 0,!0)])),_:3},8,["class","style"])])),_:3}),P(l,{class:"wd-tabs__mask",style:x(`${c.mapShow?"":"display:none;"} ${c.animating?"opacity:1;":""}`),onClick:da},null,8,["style"])])),_:3},8,["class","style"])])),_:3})):(f(),w(l,{key:1,class:g(`wd-tabs ${a.customClass} ${Q.value?"is-slide":""} ${a.mapNum<O(b).length&&0!==a.mapNum?"is-map":""} ${a.showScrollbar?"":"is-hide-scrollbar"}`)},{default:v((()=>[P(l,{class:"wd-tabs__nav"},{default:v((()=>[P(l,{class:"wd-tabs__nav--wrap"},{default:v((()=>[P(n,{"scroll-x":Q.value,"scroll-with-animation":"","scroll-left":c.scrollLeft},{default:v((()=>[P(l,{class:"wd-tabs__nav-container"},{default:v((()=>[(f(!0),z(H,null,E(O(b),((e,n)=>(f(),w(l,{onClick:a=>ua(n),key:n,class:g(`wd-tabs__nav-item ${c.activeIndex===n?"is-active":""} ${e.disabled?"is-disabled":""}`),style:x(c.activeIndex===n?a.color?"color:"+a.color:"":a.inactiveColor?"color:"+a.inactiveColor:"")},{default:v((()=>[e.badgeProps?(f(),w(s,X({key:0,"custom-class":"wd-tabs__nav-item-badge"},e.badgeProps),{default:v((()=>[P(t,{class:"wd-tabs__nav-item-text"},{default:v((()=>[G(M(e.title),1)])),_:2},1024)])),_:2},1040)):(f(),w(t,{key:1,class:"wd-tabs__nav-item-text"},{default:v((()=>[G(M(e.title),1)])),_:2},1024)),c.activeIndex===n&&c.useInnerLine?(f(),w(l,{key:2,class:"wd-tabs__line wd-tabs__line--inner"})):y("",!0)])),_:2},1032,["onClick","class","style"])))),128)),P(l,{class:"wd-tabs__line",style:x(c.lineStyle)},null,8,["style"])])),_:1})])),_:1},8,["scroll-x","scroll-left"])])),_:1}),a.mapNum<O(b).length&&0!==a.mapNum?(f(),w(l,{key:0,class:"wd-tabs__map"},{default:v((()=>[P(l,{class:"wd-tabs__map-btn",onClick:da},{default:v((()=>[P(l,{class:g("wd-tabs__map-arrow "+(c.animating?"is-open":""))},{default:v((()=>[P(ea,{name:"arrow-down"})])),_:1},8,["class"])])),_:1}),P(l,{class:"wd-tabs__map-header",style:x(`${c.mapShow?"":"display:none;"}  ${c.animating?"opacity:1;":""}`)},{default:v((()=>[G(M(a.mapTitle||O(d)("all")),1)])),_:1},8,["style"]),P(l,{class:g("wd-tabs__map-body "+(c.animating?"is-open":"")),style:x(c.mapShow?"":"display:none")},{default:v((()=>[(f(!0),z(H,null,E(O(b),((a,e)=>(f(),w(l,{class:"wd-tabs__map-nav-item",key:e,onClick:a=>ua(e)},{default:v((()=>[P(l,{class:g(`wd-tabs__map-nav-btn ${c.activeIndex===e?"is-active":""}  ${a.disabled?"is-disabled":""}`)},{default:v((()=>[G(M(a.title),1)])),_:2},1032,["class"])])),_:2},1032,["onClick"])))),128))])),_:1},8,["class","style"])])),_:1})):y("",!0)])),_:1}),P(l,{class:"wd-tabs__container",onTouchstart:ma,onTouchmove:ba,onTouchend:_a,onTouchcancel:_a},{default:v((()=>[P(l,{class:g(["wd-tabs__body",a.animated?"is-animated":""]),style:x(U.value)},{default:v((()=>[I(a.$slots,"default",{},void 0,!0)])),_:3},8,["class","style"])])),_:3}),P(l,{class:"wd-tabs__mask",style:x(`${c.mapShow?"":"display:none;"}  ${c.animating?"opacity:1":""}`),onClick:da},null,8,["style"])])),_:3},8,["class"]))}}})),[["__scopeId","data-v-0b9eb1c7"]]);export{ra as _,ua as a};
