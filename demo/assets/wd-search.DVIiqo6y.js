var e=Object.defineProperty,a=Object.defineProperties,l=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,t=Object.prototype.propertyIsEnumerable,u=(a,l,s)=>l in a?e(a,l,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[l]=s,r=(e,a)=>{for(var l in a||(a={}))c.call(a,l)&&u(e,l,a[l]);if(s)for(var l of s(a))t.call(a,l)&&u(e,l,a[l]);return e},o=(e,s)=>a(e,l(s)),n=(e,a,l)=>new Promise(((s,c)=>{var t=e=>{try{r(l.next(e))}catch(a){c(a)}},u=e=>{try{r(l.throw(e))}catch(a){c(a)}},r=e=>e.done?s(e.value):Promise.resolve(e.value).then(t,u);r((l=l.apply(e,a)).next())}));import{d,r as i,I as h,y as v,c as f,D as p,O as m,b as y,g as _,w as b,h as w,E as C,z as g,i as x,G as k,k as j,q as O,j as S,t as V,l as I,ao as P}from"./index-Bxqg77pZ.js";import{m as $,e as L,d as T,c as W,a as D,_ as E}from"./base64.C49xnrUQ.js";import{u as G}from"./useTranslate.CsR2puND.js";const q=o(r({},W),{customInputClass:$(""),modelValue:$(""),useSuffixSlot:L(!1),placeholder:String,cancelTxt:String,light:L(!1),hideCancel:L(!1),disabled:L(!1),maxlength:T(-1),placeholderLeft:L(!1),focus:L(!1),focusWhenClear:L(!1),placeholderStyle:String,placeholderClass:$("")}),z=E(d(o(r({},{name:"wd-search",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"}}),{props:q,emits:["update:modelValue","change","clear","search","focus","blur","cancel","click"],setup(e,{emit:a}){const l=e,s=a,{translate:c}=G("search"),t=i(!1),u=i(!1),r=i(""),o=i(!0),d=i(!1);h((()=>l.modelValue),(e=>{r.value=e,e&&(u.value=!0)}),{immediate:!0}),h((()=>l.focus),(e=>{if(e){if(l.disabled)return;W()}})),v((()=>{l.focus&&W()}));const $=f((()=>`wd-search  ${l.light?"is-light":""}  ${l.hideCancel?"is-without-cancel":""} ${l.customClass}`)),L=f((()=>{const e={display:""===r.value&&o.value?"flex":"none"};return p(e)}));function T(e){return n(this,null,(function*(){u.value=e,yield m(),t.value=e}))}function W(){return n(this,null,(function*(){l.disabled||(yield m(100),o.value=!1,T(!0))}))}function E(e){r.value=e.detail.value,s("update:modelValue",e.detail.value),s("change",{value:e.detail.value})}function q(){return n(this,null,(function*(){r.value="",l.focusWhenClear&&(d.value=!0,t.value=!1),yield m(),l.focusWhenClear?(o.value=!1,T(!0)):(o.value=!0,T(!1)),s("change",{value:""}),s("update:modelValue",""),s("clear")}))}function z({detail:{value:e}}){s("search",{value:e})}function B(){o.value=!1,s("focus",{value:r.value})}function F(){return n(this,null,(function*(){yield m(150),d.value?d.value=!1:(o.value=!r.value,u.value=!o.value,t.value=!1,s("blur",{value:r.value}))}))}function H(){s("cancel",{value:r.value})}function U(){l.disabled&&s("click")}return(e,a)=>{const l=j,s=x,o=P;return _(),y(s,{class:O($.value),style:k(e.customStyle)},{default:b((()=>[w(s,{class:"wd-search__block",onClick:U},{default:b((()=>[C(e.$slots,"prefix",{},void 0,!0),w(s,{class:"wd-search__field"},{default:b((()=>[e.placeholderLeft?g("",!0):(_(),y(s,{key:0,style:k(L.value),class:"wd-search__cover",onClick:W},{default:b((()=>[w(D,{name:"search","custom-class":"wd-search__search-icon"}),w(l,{class:O(`wd-search__placeholder-txt ${e.placeholderClass}`)},{default:b((()=>[S(V(e.placeholder||I(c)("search")),1)])),_:1},8,["class"])])),_:1},8,["style"])),u.value||r.value||e.placeholderLeft?(_(),y(D,{key:1,name:"search","custom-class":"wd-search__search-left-icon"})):g("",!0),u.value||r.value||e.placeholderLeft?(_(),y(o,{key:2,placeholder:e.placeholder||I(c)("search"),"placeholder-class":`wd-search__placeholder-txt ${e.placeholderClass}`,"placeholder-style":e.placeholderStyle,"confirm-type":"search",modelValue:r.value,"onUpdate:modelValue":a[0]||(a[0]=e=>r.value=e),class:O(["wd-search__input",e.customInputClass]),onFocus:B,onInput:E,onBlur:F,onConfirm:z,disabled:e.disabled,maxlength:e.maxlength,focus:t.value},null,8,["placeholder","placeholder-class","placeholder-style","modelValue","class","disabled","maxlength","focus"])):g("",!0),r.value?(_(),y(D,{key:3,"custom-class":"wd-search__clear wd-search__clear-icon",name:"error-fill",onClick:q})):g("",!0)])),_:1})])),_:3}),e.hideCancel?g("",!0):C(e.$slots,"suffix",{key:0},(()=>[w(s,{class:"wd-search__cancel",onClick:H},{default:b((()=>[S(V(e.cancelTxt||I(c)("cancel")),1)])),_:1})]),!0)])),_:3},8,["class","style"])}}})),[["__scopeId","data-v-88ed9c10"]]);export{z as _};
