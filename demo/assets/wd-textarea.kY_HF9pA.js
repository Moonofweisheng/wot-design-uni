var e=Object.defineProperty,a=Object.defineProperties,l=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,s=(a,l,r)=>l in a?e(a,l,{enumerable:!0,configurable:!0,writable:!0,value:r}):a[l]=r,i=(e,a)=>{for(var l in a||(a={}))t.call(a,l)&&s(e,l,a[l]);if(r)for(var l of r(a))o.call(a,l)&&s(e,l,a[l]);return e},n=(e,r)=>a(e,l(r)),u=(e,a,l)=>new Promise(((r,t)=>{var o=e=>{try{i(l.next(e))}catch(a){t(a)}},s=e=>{try{i(l.throw(e))}catch(a){t(a)}},i=e=>e.done?r(e.value):Promise.resolve(e.value).then(o,s);i((l=l.apply(e,a)).next())}));import{d,B as c,c as p,C as f,r as m,I as h,D as b,a7 as v,b as g,g as y,w as x,z as _,h as w,i as C,G as k,k as $,j as S,E as j,t as P,q as O,aC as T,O as V}from"./index-Bxqg77pZ.js";import{e as W,m as I,g as q,d as E,b as B,c as H,a as L,_ as z}from"./base64.C49xnrUQ.js";import{l as D,b as F,F as A}from"./page-wraper.dVabujC3.js";import{u as K}from"./useTranslate.CsR2puND.js";const M=n(i({},H),{customTextareaContainerClass:I(""),customTextareaClass:I(""),customLabelClass:I(""),modelValue:B(""),placeholder:String,placeholderStyle:String,placeholderClass:I(""),disabled:W(!1),maxlength:E(-1),autoFocus:W(!1),focus:W(!1),autoHeight:W(!1),fixed:W(!1),cursorSpacing:E(0),cursor:E(-1),confirmType:String,confirmHold:W(!1),showConfirmBar:W(!0),selectionStart:E(-1),selectionEnd:E(-1),adjustPosition:W(!0),disableDefaultPadding:W(!1),holdKeyboard:W(!1),showPassword:W(!1),clearable:W(!1),readonly:W(!1),prefixIcon:String,showWordLimit:W(!1),label:String,labelWidth:I(""),size:String,error:W(!1),center:W(!1),noBorder:W(!1),required:W(!1),prop:I(""),rules:q(),clearTrigger:I("always"),focusWhenClear:W(!0),ignoreCompositionEvent:W(!0),inputmode:I("text"),markerSide:I("before"),enableNative:W(!0)}),G=z(d(n(i({},{name:"wd-textarea",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"}}),{props:M,emits:["update:modelValue","clear","blur","focus","input","keyboardheightchange","confirm","linechange","clickprefixicon","click"],setup(e,{emit:a}){const{translate:l}=K("textarea"),r=e,t=a,o=c(),s=p((()=>f(r.placeholder)?r.placeholder:l("placeholder"))),i=m(!1),n=m(!1),d=m(!1),W=m(""),I=D();h((()=>r.focus),(e=>{n.value=e}),{immediate:!0,deep:!0}),h((()=>r.modelValue),(e=>{W.value=f(e)?String(e):""}),{immediate:!0,deep:!0});const{parent:q}=F(A),E=p((()=>{const{disabled:e,readonly:a,clearable:l,clearTrigger:t}=r;return!(!l||a||e||!W.value||!("always"===t||"focus"===r.clearTrigger&&d.value))})),B=p((()=>{const{disabled:e,readonly:a,maxlength:l,showWordLimit:t}=r;return Boolean(!e&&!a&&f(l)&&l>-1&&t)})),H=p((()=>q&&r.prop&&q.errorMessages&&q.errorMessages[r.prop]?q.errorMessages[r.prop]:"")),z=p((()=>{let e=!1;if(q&&q.props.rules){const a=q.props.rules;for(const l in a)Object.prototype.hasOwnProperty.call(a,l)&&l===r.prop&&Array.isArray(a[l])&&(e=a[l].some((e=>e.required)))}return r.required||r.rules.some((e=>e.required))||e})),M=p((()=>Array.from(String(Q(r.modelValue))).length)),G=p((()=>`wd-textarea   ${r.label||o.label?"is-cell":""} ${r.center?"is-center":""} ${I.border.value?"is-border":""} ${r.size?"is-"+r.size:""} ${r.error?"is-error":""} ${r.disabled?"is-disabled":""} ${r.autoHeight?"is-auto-height":""} ${M.value>0?"is-not-empty":""}  ${r.noBorder?"is-no-border":""} ${r.customClass}`));p((()=>`wd-textarea__label ${r.customLabelClass}`));const N=p((()=>`wd-textarea__placeholder  ${r.placeholderClass}`)),U=p((()=>`${M.value>0?"wd-textarea__count-current":""} ${M.value>r.maxlength?"is-error":""}`)),J=p((()=>r.labelWidth?b({"min-width":r.labelWidth,"max-width":r.labelWidth}):""));function Q(e){if(null==e)return"";const{maxlength:a,showWordLimit:l}=r;return l&&-1!==a&&String(e).length>a?e.toString().substring(0,a):`${e}`}function R(){return u(this,null,(function*(){d.value=!1,W.value="",r.focusWhenClear&&(i.value=!0,n.value=!1),yield V(),r.focusWhenClear&&(n.value=!0,d.value=!0),t("update:modelValue",W.value),t("clear")}))}function X(e){return u(this,arguments,(function*({detail:e}){yield V(150),i.value?i.value=!1:(d.value=!1,t("blur",{value:W.value,cursor:e.cursor?e.cursor:null}))}))}function Y({detail:e}){d.value=!0,t("focus",e)}function Z({detail:e}){W.value=Q(W.value),t("update:modelValue",W.value),t("input",e)}function ee({detail:e}){t("keyboardheightchange",e)}function ae({detail:e}){t("confirm",e)}function le({detail:e}){t("linechange",e)}function re(){t("clickprefixicon")}return v((()=>{W.value=Q(W.value),t("update:modelValue",W.value)})),(e,a)=>{const l=$,t=C,o=T;return y(),g(t,{class:O(G.value),style:k(e.customStyle)},{default:x((()=>[e.label||e.$slots.label?(y(),g(t,{key:0,class:"wd-textarea__label",style:k(J.value)},{default:x((()=>[z.value&&"before"===e.markerSide?(y(),g(l,{key:0,class:"wd-textarea__required wd-textarea__required--left"},{default:x((()=>[S("*")])),_:1})):_("",!0),e.prefixIcon||e.$slots.prefix?(y(),g(t,{key:1,class:"wd-textarea__prefix"},{default:x((()=>[e.prefixIcon&&!e.$slots.prefix?(y(),g(L,{key:0,"custom-class":"wd-textarea__icon",name:e.prefixIcon,onClick:re},null,8,["name"])):j(e.$slots,"prefix",{key:1},void 0,!0)])),_:3})):_("",!0),w(t,{class:"wd-textarea__label-inner"},{default:x((()=>[e.label&&!e.$slots.label?(y(),g(l,{key:0},{default:x((()=>[S(P(e.label),1)])),_:1})):e.$slots.label?j(e.$slots,"label",{key:1},void 0,!0):_("",!0)])),_:3}),z.value&&"after"===e.markerSide?(y(),g(l,{key:2,class:"wd-textarea__required"},{default:x((()=>[S("*")])),_:1})):_("",!0)])),_:3},8,["style"])):_("",!0),w(t,{class:O(`wd-textarea__value ${E.value?"is-suffix":""} ${e.customTextareaContainerClass} ${B.value?"is-show-limit":""}`)},{default:x((()=>[w(o,{class:O(`wd-textarea__inner ${e.customTextareaClass}`),modelValue:W.value,"onUpdate:modelValue":a[0]||(a[0]=e=>W.value=e),"show-count":!1,placeholder:s.value,disabled:e.disabled||e.readonly,"enable-native":e.enableNative,maxlength:e.maxlength,focus:n.value,"auto-focus":e.autoFocus,"placeholder-style":e.placeholderStyle,"placeholder-class":N.value,"auto-height":e.autoHeight,"cursor-spacing":e.cursorSpacing,fixed:e.fixed,cursor:e.cursor,"show-confirm-bar":e.showConfirmBar,"selection-start":e.selectionStart,"selection-end":e.selectionEnd,"adjust-position":e.adjustPosition,"hold-keyboard":e.holdKeyboard,"confirm-type":e.confirmType,"confirm-hold":e.confirmHold,"disable-default-padding":e.disableDefaultPadding,ignoreCompositionEvent:e.ignoreCompositionEvent,inputmode:e.inputmode,onInput:Z,onFocus:Y,onBlur:X,onConfirm:ae,onLinechange:le,onKeyboardheightchange:ee},null,8,["class","modelValue","placeholder","disabled","enable-native","maxlength","focus","auto-focus","placeholder-style","placeholder-class","auto-height","cursor-spacing","fixed","cursor","show-confirm-bar","selection-start","selection-end","adjust-position","hold-keyboard","confirm-type","confirm-hold","disable-default-padding","ignoreCompositionEvent","inputmode"]),H.value?(y(),g(t,{key:0,class:"wd-textarea__error-message"},{default:x((()=>[S(P(H.value),1)])),_:1})):_("",!0),r.readonly?(y(),g(t,{key:1,class:"wd-textarea__readonly-mask"})):_("",!0),w(t,{class:"wd-textarea__suffix"},{default:x((()=>[E.value?(y(),g(L,{key:0,"custom-class":"wd-textarea__clear",name:"error-fill",onClick:R})):_("",!0),B.value?(y(),g(t,{key:1,class:"wd-textarea__count"},{default:x((()=>[w(l,{class:O(U.value)},{default:x((()=>[S(P(M.value),1)])),_:1},8,["class"]),S(" /"+P(e.maxlength),1)])),_:1})):_("",!0)])),_:1})])),_:1},8,["class"])])),_:3},8,["class","style"])}}})),[["__scopeId","data-v-8118fad9"]]);export{G as _};
