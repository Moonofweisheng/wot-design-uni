import{r as a,c as o,ac as e,C as t}from"./index-Bxqg77pZ.js";import{u as n}from"./useRaf.CqlEfEUH.js";const s=1e3,r=60*s,l=60*r,u=24*l;function i(i){let c,f;const{start:h,cancel:m}=n((function(){i.millisecond?C():g()})),v=a(i.time),M=o((()=>{return{total:a=v.value,days:Math.floor(a/u),hours:Math.floor(a%u/l),minutes:Math.floor(a%l/r),seconds:Math.floor(a%r/s),milliseconds:Math.floor(a%s)};var a})),d=()=>{f=!1,m()},p=()=>Math.max(c-Date.now(),0),x=a=>{v.value=a,t(i.onChange)&&i.onChange(M.value),0===a&&(d(),t(i.onFinish)&&i.onFinish())},C=()=>{f&&(x(p()),v.value>0&&h())},g=()=>{if(f){const e=p();a=e,o=v.value,(Math.floor(a/1e3)!==Math.floor(o/1e3)||0===e)&&x(e),v.value>0&&h()}var a,o};return e(d),{start:()=>{f||(c=Date.now()+v.value,f=!0,h())},pause:d,reset:(a=i.time)=>{d(),v.value=a},current:M}}export{i as u};
