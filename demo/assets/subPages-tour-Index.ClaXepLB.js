var e=Object.defineProperty,t=Object.defineProperties,l=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,n=(t,l,a)=>l in t?e(t,l,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[l]=a,s=(e,t)=>{for(var l in t||(t={}))o.call(t,l)&&n(e,l,t[l]);if(a)for(var l of a(t))u.call(t,l)&&n(e,l,t[l]);return e},r=(e,a)=>t(e,l(a)),i=(e,t,l)=>new Promise(((a,o)=>{var u=e=>{try{s(l.next(e))}catch(t){o(t)}},n=e=>{try{s(l.throw(e))}catch(t){o(t)}},s=e=>e.done?a(e.value):Promise.resolve(e.value).then(u,n);s((l=l.apply(e,t)).next())}));import{d,c,C as p,r as f,D as v,H as m,I as h,b as g,z as _,g as b,w as x,h as k,i as y,L as w,E as S,G as C,q as V,bd as N,j as T,t as O,aD as I,M as j,_ as $,aw as z,e as U,f as F,be as H,k as P,l as E}from"./index-Bxqg77pZ.js";import{_ as R}from"./wd-button.Dfw0jUO9.js";import{_ as D}from"./demo-block.Q9ikF_jn.js";import{c as B,e as M,d as G,g as q,_ as L,a as A}from"./base64.C49xnrUQ.js";import{u as J}from"./useRaf.CqlEfEUH.js";import{u as K}from"./useTranslate.CsR2puND.js";import{a as Q}from"./page-wraper.dVabujC3.js";const W=r(s({},B),{modelValue:M(!1),steps:q(),current:G(0),mask:M(!0),maskColor:String,offset:G(20),duration:G(300),borderRadius:G(8),padding:G(8),prevText:String,nextText:String,skipText:String,finishText:String,bottomSafetyOffset:G(100),topSafetyOffset:G(0),customNav:M(!1),clickMaskNext:M(!1),highlightStyle:{type:Object,default:()=>({})},zIndex:Number,showTourButtons:M(!0),scope:{type:Object},missingStrategy:{type:String,default:"stop"}}),X=L(d(r(s({},{name:"wd-tour",options:{addGlobalClass:!0,virtualHost:!0,styleIsolation:"shared"}}),{props:W,emits:["update:modelValue","update:current","change","prev","next","finish","skip","error"],setup(e,{expose:t,emit:l}){const a=e,o=l,{translate:u}=K("tour"),n=c((()=>p(a.prevText)?a.prevText:u("prev"))),d=c((()=>p(a.nextText)?a.nextText:u("next"))),U=c((()=>p(a.skipText)?a.skipText:u("skip"))),F=c((()=>p(a.finishText)?a.finishText:u("finish"))),H=f(0),P=f({top:0,left:0,width:0,height:0}),E=f(0),R=f(0),D=f(!0),B=f(0),M=f(0);f(null);const G=f(0),q=c((()=>{const e={};return p(a.zIndex)&&(e.zIndex=a.zIndex),v(e)})),L=c((()=>"wd-tour__highlight "+(a.mask?"wd-tour__highlight--mask":""))),A=c((()=>a.steps[H.value]||{}));function Q(){return{transition:a.duration+"ms all"}}function W(e){return{transition:a.duration+"ms all,boxShadow 0s,height 0s,width 0s",borderRadius:a.borderRadius+"px",padding:e+"px"}}const X=c((()=>{if(!P.value.width&&!P.value.height)return Q();const e=Number(p(A.value.padding)?A.value.padding:a.padding),t=W(e),l=r(s({},t),{top:m((P.value.top||0)-e),left:m((P.value.left||0)-e),height:m(P.value.height||0),width:m(P.value.width||0)});return p(a.mask)&&p(a.maskColor)&&(l.boxShadow=`0 0 0 100vh ${a.maskColor}`),v([s({},l),a.highlightStyle])})),Y=c((()=>{const e={};if(p(a.zIndex)){const t=Number(a.zIndex);e.zIndex=t+1,e.transitionDuration=`${a.duration}ms`}const t=Number(p(A.value.offset)?A.value.offset:a.offset),l=p(A.value.placement)?A.value.placement:"auto";return"bottom"===l||"auto"===l&&D.value?e.top=m((P.value.top||0)+(P.value.height||0)+Number(t)):e.bottom=m(E.value+R.value-(P.value.top||0)+Number(t)),v(e)})),Z=c((()=>{const e=Number(p(A.value.padding)?A.value.padding:a.padding);if(!P.value.width&&!P.value.height)return Q();const t=W(e),l=r(s({},t),{top:m((P.value.top||0)-e),left:m((P.value.left||0)-e),width:m((P.value.width||0)+2*e),height:m((P.value.height||0)+2*e)});return p(a.mask)&&p(a.maskColor)&&(l.boxShadow=`0 0 0 100vh ${a.maskColor}`),l}));function ee(){}function te(){return i(this,null,(function*(){le();const e=A.value.element;if(e)try{const t=yield j(e,!1,a.scope);!function(e){P.value=e,P.value.top=(e.top||0)+R.value,P.value.bottom=(void 0!==e.bottom?e.bottom:(e.top||0)+(e.height||0))+R.value}(t);const l=function(){let e=R.value+Number(G.value),t=E.value;return{top:e,bottom:t}}(),o=function(e,t){const l=Number(e.top)<t.top,o=(void 0!==e.bottom?e.bottom:0)+Number(a.bottomSafetyOffset)>t.bottom;return{up:l,down:o}}(t,l);!function(e,t,l){t.up?function(e,t){let l=B.value+Number(e.top)-a.padding-t.top;P.value.top=t.top+a.padding,P.value.bottom=E.value-(t.top+a.padding),z({scrollTop:l,duration:Number(a.duration),success:()=>{B.value=l}})}(e,l):t.down&&function(e){const t=e.bottom||0;let l=t-E.value+a.padding+Number(a.bottomSafetyOffset);P.value.top=E.value-t-a.padding-Number(a.bottomSafetyOffset),P.value.bottom=E.value-a.padding-Number(a.bottomSafetyOffset),z({scrollTop:l+B.value,duration:Number(a.duration),success:()=>{B.value=l+B.value}})}(e)}(t,o,l),function(e){let t=M.value;const l=(E.value+t)/2+R.value,a=(e.top||0)+(e.height||0)/2+R.value;D.value=a<l}(t)}catch(t){console.error("updateElementInfo error:",t),o("error",{message:"无法找到指定的引导元素",element:e}),"skip"===a.missingStrategy?oe():"hide"===a.missingStrategy&&o("update:modelValue",!1)}}))}function le(){const e=$();E.value=e.windowHeight,R.value=e.windowTop||0,M.value=e.statusBarHeight||0}function ae(){if(H.value>0){const e=H.value;H.value--,o("prev",{prevCurrent:e,current:H.value,total:a.steps.length,isElementInTop:D.value}),o("change",{current:H.value})}}function oe(){if(H.value<a.steps.length-1){const e=H.value;H.value++,o("next",{prevCurrent:e,current:H.value,total:a.steps.length,isElementInTop:D.value}),o("change",{current:H.value})}else ue()}function ue(){o("finish",{current:H.value,total:a.steps.length}),H.value=0,B.value=0,o("update:modelValue",!1)}function ne(){o("skip",{current:H.value,total:a.steps.length}),H.value=0,B.value=0,o("update:modelValue",!1)}function se(){a.clickMaskNext&&oe()}return h((()=>a.current),(e=>{H.value=e})),h((()=>H.value),(e=>{const t=J(te);I((()=>{t.start()})),o("update:current",e)})),h((()=>a.modelValue),(e=>{if(e){B.value=0,le();const e=J((()=>{te(),o("update:current",H.value)}));I((()=>{e.start()}))}}),{immediate:!0}),a.customNav?a.topSafetyOffset&&Number(a.topSafetyOffset)>0?G.value=Number(a.topSafetyOffset):G.value=0:G.value=Number(a.topSafetyOffset)||0,t({handlePrev:ae,handleNext:oe,handleFinish:ue,handleSkip:ne}),(e,t)=>{const l=y,a=N;return e.modelValue?(b(),g(l,{key:0,class:"wd-tour",style:C(q.value),onTouchmove:w(ee,["stop","prevent"])},{default:x((()=>[k(l,{class:"wd-tour__mask",onClick:w(se,["stop"])},{default:x((()=>[S(e.$slots,"highlight",{elementInfo:Z.value},(()=>[k(l,{class:V(L.value),style:C(X.value)},null,8,["class","style"])]),!0),k(l,{class:"wd-tour__popover",style:C(Y.value)},{default:x((()=>[S(e.$slots,"content",{},(()=>[k(l,{class:"wd-tour__info"},{default:x((()=>[k(a,{nodes:A.value.content},null,8,["nodes"])])),_:1})]),!0),e.showTourButtons?(b(),g(l,{key:0,class:"wd-tour__buttons"},{default:x((()=>[H.value>0?(b(),g(l,{key:0,class:"wd-tour__prev",onClick:w(ae,["stop"])},{default:x((()=>[S(e.$slots,"prev",{},(()=>[k(l,{class:"wd-tour__prev__default"},{default:x((()=>[T(O(n.value),1)])),_:1})]),!0)])),_:3})):_("",!0),k(l,{class:"wd-tour__skip",onClick:w(ne,["stop"])},{default:x((()=>[e.$slots.skip?S(e.$slots,"skip",{key:0},void 0,!0):(b(),g(l,{key:1,class:"wd-tour__skip__default"},{default:x((()=>[T(O(U.value),1)])),_:1}))])),_:3}),H.value!==e.steps.length-1?(b(),g(l,{key:1,class:"wd-tour__next",onClick:w(oe,["stop"])},{default:x((()=>[S(e.$slots,"next",{},(()=>[k(l,{class:"wd-tour__next__default"},{default:x((()=>[T(O(`${d.value}(${H.value+1}/${e.steps.length})`),1)])),_:1})]),!0)])),_:3})):_("",!0),H.value===e.steps.length-1?(b(),g(l,{key:2,class:"wd-tour__finish",onClick:w(ue,["stop"])},{default:x((()=>[S(e.$slots,"finish",{},(()=>[k(l,{class:"wd-tour__finish__default"},{default:x((()=>[T(O(F.value),1)])),_:1})]),!0)])),_:3})):_("",!0)])),_:3})):_("",!0)])),_:3},8,["style"])])),_:3})])),_:3},8,["style"])):_("",!0)}}})),[["__scopeId","data-v-bbd75576"]]),Y=L(d({__name:"Index",setup(e){const t=f(!1),l=f(!1),a=f(!1),o=f(!1),u=f(!1),n=f(!1),s=f(!1),r=f("继续"),d=f("返回"),c=f("跳过"),p=f("知道了"),m=f(0),h=f(0),_=[{element:"#step1",content:"欢迎使用引导组件，这是第一步的说明"},{element:"#step2",content:"这是第二步，展示了另一个功能点"},{element:"#step3",content:"这里可以是<H1>富文本</H1>"},{element:"#step4",content:"这是最后一步，完成引导流程"}],w=[{element:"#step1",content:"这是<strong>自定义蒙版</strong>示例，使用了<strong>红色半透明</strong>蒙版"},{element:"#step2",content:"蒙版颜色设置为<code>rgba(255, 0, 0, 0.6)</code>"},{element:"#step3",content:"同时调整了<em>高亮区域的圆角</em>、<u>内边距</u>和<code>偏移量</code>"},{element:"#step4",content:"完成了自定义蒙版样式的展示"}],S=[{element:"#step1",content:"这是<strong>无蒙版</strong>引导模式"},{element:"#step2",content:"只高亮目标元素，<em>不显示</em>半透明遮罩"},{element:"#step3",content:"适用于需要保持页面可见性的场景"},{element:"#step4",content:"引导完成，<u>不干扰</u>用户查看页面其他内容"}],V=[{element:"#step1",content:"这是<strong>自定义高亮区域</strong>示例"},{element:"#step2",content:"使用了<em>红色虚线边框</em>和<code>半透明背景</code>"},{element:"#step3",content:"通过插槽实现完全自定义的高亮样式"},{element:"#step4",content:"完成了自定义高亮区域的展示"}],N=[{element:"#step1",content:"这是<H1>自定义样式</H1>的引导，可以修改<em>蒙版颜色</em>、<u>圆角大小</u>等属性"},{element:"#step2",content:'可以自定义按钮文字，如"继续"、"返回"等'},{element:"#step3",content:"通过属性配置实现个性化引导体验"},{element:"#step4",content:"这是最后一步，完成引导流程"}],O={border:"2px dashed #ff0000",borderRadius:"8px",background:"rgba(255, 0, 0, 0.1)",boxSizing:"border-box"};function j(){return i(this,null,(function*(){yield z({scrollTop:0,duration:0})}))}function $(){return i(this,null,(function*(){yield j(),I((()=>{t.value=!0}))}))}function B(){j(),l.value=!0}function M(){return i(this,null,(function*(){j(),a.value=!0}))}function G(){j(),o.value=!0}function q(){j(),u.value=!0}function L(){j(),n.value=!0}function J(){j(),h.value=2,s.value=!0}function K(){console.log("引导完成"),t.value=!1,l.value=!1,a.value=!1,o.value=!1,u.value=!1,n.value=!1,s.value=!1}function W(){console.log("引导跳过"),t.value=!1,l.value=!1,a.value=!1,o.value=!1,u.value=!1,n.value=!1,s.value=!1}function Y({current:e}){console.log("当前步骤:",e)}return(e,i)=>{const f=P,I=y,j=U(F("wd-button"),R),z=U(F("demo-block"),D),Z=H("wd-button-group"),ee=U(F("wd-tour"),X),te=U(F("wd-icon"),A),le=U(F("page-wraper"),Q);return b(),g(le,null,{default:x((()=>[k(I,{class:"tour-container"},{default:x((()=>[k(I,{class:"tour-step",id:"step1"},{default:x((()=>[k(I,{class:"tour-item"},{default:x((()=>[k(f,{class:"tour-title"},{default:x((()=>[T("第一步")])),_:1}),k(f,{class:"tour-content"},{default:x((()=>[T("这是引导的第一步，介绍基本功能")])),_:1})])),_:1})])),_:1}),k(I,{class:"tour-step",id:"step2"},{default:x((()=>[k(I,{class:"tour-item"},{default:x((()=>[k(f,{class:"tour-title"},{default:x((()=>[T("第二步")])),_:1}),k(f,{class:"tour-content"},{default:x((()=>[T("这是引导的第二步，展示更多功能")])),_:1})])),_:1})])),_:1}),k(I,{class:"tour-step",id:"step3"},{default:x((()=>[k(I,{class:"tour-item"},{default:x((()=>[k(f,{class:"tour-title"},{default:x((()=>[T("第三步")])),_:1}),k(f,{class:"tour-content"},{default:x((()=>[T("这是引导的第三步，深入功能介绍")])),_:1})])),_:1})])),_:1}),k(I,{class:"tour-step",id:"step4"},{default:x((()=>[k(I,{class:"tour-item"},{default:x((()=>[k(f,{class:"tour-title"},{default:x((()=>[T("第四步")])),_:1}),k(f,{class:"tour-content"},{default:x((()=>[T("这是引导的最后一步，总结功能")])),_:1})])),_:1})])),_:1})])),_:1}),k(z,{title:"基本用法"},{default:x((()=>[k(I,{class:"button-group"},{default:x((()=>[k(j,{type:"primary",onClick:$},{default:x((()=>[T("开始引导")])),_:1})])),_:1})])),_:1}),k(z,{title:"点击蒙版继续"},{default:x((()=>[k(I,{class:"button-group"},{default:x((()=>[k(j,{type:"primary",onClick:B},{default:x((()=>[T("点击蒙版继续")])),_:1})])),_:1})])),_:1}),k(z,{title:"自定义蒙版"},{default:x((()=>[k(I,{class:"button-group"},{default:x((()=>[k(j,{type:"primary",onClick:M},{default:x((()=>[T("自定义蒙版")])),_:1})])),_:1})])),_:1}),k(z,{title:"关闭蒙版"},{default:x((()=>[k(I,{class:"button-group"},{default:x((()=>[k(j,{type:"primary",onClick:G},{default:x((()=>[T("关闭蒙版")])),_:1})])),_:1})])),_:1}),k(z,{title:"自定义高亮区域"},{default:x((()=>[k(I,{class:"button-group"},{default:x((()=>[k(j,{type:"primary",onClick:q},{default:x((()=>[T("自定义高亮")])),_:1})])),_:1})])),_:1}),k(z,{title:"自定义内容和按钮"},{default:x((()=>[k(I,{class:"button-group"},{default:x((()=>[k(j,{type:"primary",onClick:L},{default:x((()=>[T("自定义内容")])),_:1})])),_:1})])),_:1}),k(z,{title:"控制当前步骤"},{default:x((()=>[k(I,{class:"button-group"},{default:x((()=>[k(Z,null,{default:x((()=>[k(j,{type:"primary",onClick:J},{default:x((()=>[T("跳转到第三步开始引导")])),_:1})])),_:1})])),_:1})])),_:1}),k(ee,{modelValue:t.value,"onUpdate:modelValue":i[0]||(i[0]=e=>t.value=e),steps:_,current:m.value,"onUpdate:current":i[1]||(i[1]=e=>m.value=e),padding:10,onFinish:K,onSkip:W,onChange:Y},null,8,["modelValue","current"]),k(ee,{modelValue:l.value,"onUpdate:modelValue":i[2]||(i[2]=e=>l.value=e),steps:_,"click-mask-next":!0,onFinish:K,onSkip:W,onChange:Y},null,8,["modelValue"]),k(ee,{modelValue:a.value,"onUpdate:modelValue":i[3]||(i[3]=e=>a.value=e),steps:w,mask:!0,"mask-color":"red",offset:40,"border-radius":15,padding:10,"next-text":"下一步","prev-text":"上一步","skip-text":"跳过","finish-text":"完成",onFinish:K,onSkip:W,onChange:Y},null,8,["modelValue"]),k(ee,{modelValue:o.value,"onUpdate:modelValue":i[4]||(i[4]=e=>o.value=e),steps:S,mask:!1,onFinish:K,onSkip:W,onChange:Y},null,8,["modelValue"]),k(ee,{modelValue:u.value,"onUpdate:modelValue":i[5]||(i[5]=e=>u.value=e),steps:V,padding:10,onFinish:K,onSkip:W,onChange:Y},{highlight:x((({elementInfo:e})=>[k(I,{class:"custom-highlight",style:C(`${E(v)(e)};${E(v)(O)}`)},null,8,["style"])])),_:1},8,["modelValue"]),k(ee,{modelValue:n.value,"onUpdate:modelValue":i[6]||(i[6]=e=>n.value=e),steps:N,"next-text":r.value,"prev-text":d.value,"skip-text":c.value,"finish-text":p.value,onFinish:K,onSkip:W,onChange:Y},{content:x((()=>[k(I,{class:"custom-content"},{default:x((()=>[k(te,{name:"help-circle-filled",size:"22px"}),k(f,{class:"custom-text"},{default:x((()=>[T("自定义引导内容区域")])),_:1})])),_:1})])),next:x((()=>[k(I,{class:"custom-button custom-next"},{default:x((()=>[T("下一步")])),_:1})])),finish:x((()=>[k(I,{class:"custom-button custom-finish"},{default:x((()=>[T("完成")])),_:1})])),_:1},8,["modelValue","next-text","prev-text","skip-text","finish-text"]),k(ee,{modelValue:s.value,"onUpdate:modelValue":i[7]||(i[7]=e=>s.value=e),steps:_,current:h.value,"onUpdate:current":i[8]||(i[8]=e=>h.value=e),padding:10,onFinish:K,onSkip:W,onChange:Y},null,8,["modelValue","current"])])),_:1})}}}),[["__scopeId","data-v-e1f7e44e"]]);export{Y as default};
